var l=Object.assign;import{_ as k,a as y}from"./useDrawer.78890a21.js";import{_ as j}from"./BasicForm.71637030.js";import{u as x}from"./useForm.eec49fca.js";import{j as g,d as R,w as $,D as I,F as A,r as D,o as E,n as T,J as C,p as P,s as O}from"./index.0523a5a3.js";import{A as c}from"./commonEnum.da040d67.js";import{A as _,u as V,a as L}from"./warehouse.6ac3ba1f.js";import{g as M}from"./formValidateService.5ed66daa.js";const{t:e}=g(),G=[{title:e("lamp.materials.warehouse.name"),dataIndex:"name"},{title:e("lamp.materials.warehouse.orderIndex"),dataIndex:"orderIndex"},{title:e("lamp.materials.warehouse.managerId"),dataIndex:"managerId"},{title:e("lamp.materials.warehouse.remark"),dataIndex:"remark"},{title:e("lamp.materials.warehouse.version"),dataIndex:"version"},{title:e("lamp.materials.warehouse.isDelete"),dataIndex:"isDelete"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],W=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],z=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.warehouse.name"),field:"name",component:"Input"},{label:e("lamp.materials.warehouse.orderIndex"),field:"orderIndex",component:"Input"},{label:e("lamp.materials.warehouse.managerId"),field:"managerId",component:"Input"},{label:e("lamp.materials.warehouse.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.warehouse.version"),field:"version",component:"Input"},{label:e("lamp.materials.warehouse.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],J=s=>[];var p=R({name:"WarehouseEdit",components:{BasicDrawer:k,BasicForm:j},emits:["success","register"],setup(s,{emit:d}){const{t:r}=g(),o=$(c.ADD),{createMessage:u}=A(),[f,{setFieldsValue:t,resetFields:n,updateSchema:b,validate:v}]=x({labelWidth:100,schemas:z,showActionButtonGroup:!1,actionColOptions:{span:23}}),[F,{setDrawerProps:m,closeDrawer:B}]=y(async a=>{await n(),m({confirmLoading:!1}),o.value=a==null?void 0:a.type;let w=_.Save;const h=l({},a==null?void 0:a.record);I(o)===c.EDIT?w=_.Update:h.id=void 0,await t(l({},h)),M(w,J()).then(async i=>{i&&i.length>0&&await b(i)})});async function S(){try{const a=await v();m({confirmLoading:!0}),I(o)===c.EDIT?await V(a):await L(a),u.success(r(`common.tips.${o.value}Success`)),B(),d("success")}finally{m({confirmLoading:!1})}}return{t:r,registerDrawer:F,registerForm:f,type:o,handleSubmit:S}}});function N(s,d,r,o,u,f){const t=D("BasicForm"),n=D("BasicDrawer");return E(),T(n,O(s.$attrs,{onRegister:s.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:s.t(`common.title.${s.type}`),onOk:s.handleSubmit}),{default:C(()=>[P(t,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}p.render=N;var U=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:p});export{U as E,p as _,G as c,W as s};
