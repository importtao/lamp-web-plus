var o=Object.assign;import{_ as v,a as q}from"./useDrawer.3cc723e3.js";import{_ as R}from"./BasicForm.13ecb12b.js";import{u as A}from"./useForm.ac288eb4.js";import{cu as n,be as r,j as D,h as b,d as E,w as O,D as w,F as U,r as M,o as x,n as B,J as j,p as k,s as $}from"./index.b361f078.js";import{S as i,A as g}from"./commonEnum.da040d67.js";import{g as V}from"./formValidateService.703a8ce6.js";import{f as P}from"./general.9f14c4cd.js";const m={Page:{url:i.AUTHORITY+"/optLog/page",method:n.POST},Save:{url:i.AUTHORITY+"/optLog",method:n.POST},Update:{url:i.AUTHORITY+"/optLog",method:n.PUT},Delete:{url:i.AUTHORITY+"/optLog",method:n.DELETE},Query:{url:i.AUTHORITY+"/optLog/query",method:n.POST}},C=t=>r.request(o(o({},m.Page),{params:t})),N=t=>r.request(o(o({},m.Save),{params:t})),z=t=>r.request(o(o({},m.Update),{params:t})),G=t=>r.request(o(o({},m.Delete),{params:t})),{t:e}=D(),J=[{title:e("lamp.system.optLog.requestIp"),dataIndex:"requestIp"},{title:e("lamp.system.optLog.type"),dataIndex:"type"},{title:e("lamp.system.optLog.userName"),dataIndex:"userName"},{title:e("lamp.system.optLog.description"),dataIndex:"description"},{title:e("lamp.system.optLog.classPath"),dataIndex:"classPath"},{title:e("lamp.system.optLog.actionMethod"),dataIndex:"actionMethod"},{title:e("lamp.system.optLog.requestUri"),dataIndex:"requestUri"},{title:e("lamp.system.optLog.httpMethod"),dataIndex:"httpMethod"},{title:e("lamp.system.optLog.startTime"),dataIndex:"startTime"},{title:e("lamp.system.optLog.finishTime"),dataIndex:"finishTime"},{title:e("lamp.system.optLog.consumingTime"),dataIndex:"consumingTime"},{title:e("lamp.system.optLog.ua"),dataIndex:"ua"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],Q=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],W=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.optLog.requestIp"),field:"requestIp",component:"Input"},{label:e("lamp.system.optLog.type"),field:"type",component:"ApiSelect",componentProps:{api:P,params:["LogType"],resultField:"LogType"}},{label:e("lamp.system.optLog.userName"),field:"userName",component:"Input"},{label:e("lamp.system.optLog.description"),field:"description",component:"Input"},{label:e("lamp.system.optLog.classPath"),field:"classPath",component:"Input"},{label:e("lamp.system.optLog.actionMethod"),field:"actionMethod",component:"Input"},{label:e("lamp.system.optLog.requestUri"),field:"requestUri",component:"Input"},{label:e("lamp.system.optLog.httpMethod"),field:"httpMethod",component:"ApiSelect",componentProps:{api:P,params:["HttpMethod"],resultField:"HttpMethod"}},{label:e("lamp.system.optLog.startTime"),field:"startTime",component:"DatePicker",componentProps:{format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:b("00:00:00","HH:mm:ss")}}},{label:e("lamp.system.optLog.finishTime"),field:"finishTime",component:"DatePicker",componentProps:{format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:b("00:00:00","HH:mm:ss")}}},{label:e("lamp.system.optLog.consumingTime"),field:"consumingTime",component:"Input"},{label:e("lamp.system.optLog.ua"),field:"ua",component:"Input"}],K=t=>[];var f=E({name:"OptLogEdit",components:{BasicDrawer:v,BasicForm:R},emits:["success","register"],setup(t,{emit:h}){const{t:p}=D(),a=O(g.ADD),{createMessage:y}=U(),[T,{setFieldsValue:l,resetFields:c,updateSchema:Y,validate:H}]=A({labelWidth:100,schemas:W,showActionButtonGroup:!1,actionColOptions:{span:23}}),[S,{setDrawerProps:d,closeDrawer:F}]=q(async s=>{await c(),d({confirmLoading:!1}),a.value=s==null?void 0:s.type;let L=m.Save;const I=o({},s==null?void 0:s.record);w(a)===g.EDIT?L=m.Update:I.id=void 0,await l(o({},I)),V(L,K()).then(async u=>{u&&u.length>0&&await Y(u)})});async function _(){try{const s=await H();d({confirmLoading:!0}),w(a)===g.EDIT?await z(s):await N(s),y.success(p(`common.tips.${a.value}Success`)),F(),h("success")}finally{d({confirmLoading:!1})}}return{t:p,registerDrawer:S,registerForm:T,type:a,handleSubmit:_}}});function X(t,h,p,a,y,T){const l=M("BasicForm"),c=M("BasicDrawer");return x(),B(c,$(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:j(()=>[k(l,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=X;var Z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{Z as E,f as _,J as c,C as p,G as r,Q as s};
