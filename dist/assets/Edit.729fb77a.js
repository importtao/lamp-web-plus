var a=Object.assign;import{_ as R,a as j}from"./useDrawer.9766a9b2.js";import{_ as P}from"./BasicForm.7d393d3b.js";import{u as B}from"./useForm.09fdf95d.js";import{cu as n,be as c,j as w,d as L,w as $,D,F as M,r as v,o as O,n as k,J as q,p as C,s as x}from"./index.ff8e7350.js";import{S as i,A as g}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.a395f7ea.js";const r={Page:{url:i.MATERIALS+"/category/page",method:n.POST},Save:{url:i.MATERIALS+"/category",method:n.POST},Update:{url:i.MATERIALS+"/category",method:n.PUT},Delete:{url:i.MATERIALS+"/category",method:n.DELETE},Query:{url:i.MATERIALS+"/category/query",method:n.POST}},V=e=>c.request(a(a({},r.Page),{params:e})),G=e=>c.request(a(a({},r.Save),{params:e})),z=e=>c.request(a(a({},r.Update),{params:e})),H=e=>c.request(a(a({},r.Delete),{params:e})),{t}=w(),J=[{title:t("lamp.materials.category.objectId"),dataIndex:"objectId"},{title:t("lamp.materials.category.type"),dataIndex:"type"},{title:t("lamp.materials.category.categoryId"),dataIndex:"categoryId"},{title:t("lamp.materials.category.version"),dataIndex:"version"},{title:t("lamp.materials.category.isDelete"),dataIndex:"isDelete"},{title:t("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:t("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:t("lamp.materials.category.objectId"),field:"objectId",component:"Input"},{label:t("lamp.materials.category.type"),field:"type",component:"Input"},{label:t("lamp.materials.category.categoryId"),field:"categoryId",component:"Input"},{label:t("lamp.materials.category.version"),field:"version",component:"Input"},{label:t("lamp.materials.category.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:t("lamp.common.yes"),value:!0},{label:t("lamp.common.no"),value:!1}]}}],W=e=>[];var f=L({name:"CategoryEdit",components:{BasicDrawer:R,BasicForm:P},emits:["success","register"],setup(e,{emit:y}){const{t:l}=w(),s=$(g.ADD),{createMessage:I}=M(),[h,{setFieldsValue:m,resetFields:p,updateSchema:_,validate:E}]=B({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[T,{setDrawerProps:d,closeDrawer:A}]=j(async o=>{await p(),d({confirmLoading:!1}),s.value=o==null?void 0:o.type;let S=r.Save;const b=a({},o==null?void 0:o.record);D(s)===g.EDIT?S=r.Update:b.id=void 0,await m(a({},b)),U(S,W()).then(async u=>{u&&u.length>0&&await _(u)})});async function F(){try{const o=await E();d({confirmLoading:!0}),D(s)===g.EDIT?await z(o):await G(o),I.success(l(`common.tips.${s.value}Success`)),A(),y("success")}finally{d({confirmLoading:!1})}}return{t:l,registerDrawer:T,registerForm:h,type:s,handleSubmit:F}}});function K(e,y,l,s,I,h){const m=v("BasicForm"),p=v("BasicDrawer");return O(),k(p,x(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:e.t(`common.title.${e.type}`),onOk:e.handleSubmit}),{default:q(()=>[C(m,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,V as p,H as r,N as s};
