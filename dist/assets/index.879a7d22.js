var c=Object.assign;import{_ as z}from"./index.vue_vue&type=style&index=0&lang.b1e8e9a6.js";import{p as s,s as W,I as Q,cu as r,be as v,j as X,d as J,B as C,w as p,ae as K,a4 as D,x as Z,da as F,aW as ee,aX as te,r as j,o as ne,n as oe,L as x,q as ae,aF as se}from"./index.b6dfbfcf.js";import{S as i,A}from"./commonEnum.da040d67.js";import{q as re}from"./Edit.492dc4e8.js";import{_ as ie}from"./BasicForm.ba267815.js";import{u as le}from"./useForm.93cfb83b.js";import me from"./index.607546ec.js";import{g as ue}from"./formValidateService.c9ec958e.js";import{R as U,C as M}from"./index.fc5361f4.js";import{C as E}from"./index.4d2d1116.js";import{F as de}from"./TableImg.62dc4313.js";import{P as ce}from"./PlusOutlined.84d8b58b.js";import{D as pe}from"./DeleteOutlined.e9575d1c.js";import"./useContextMenu.3236c3a3.js";import"./index.57ea38db.js";import"./useExpose.6218ae5d.js";import"./iconUtil.018c1850.js";import"./conductUtil.8c9b1169.js";import"./_baseSet.e7326e09.js";import"./hasIn.babd797c.js";import"./FileOutlined.44378449.js";import"./get.4daef9c8.js";import"./vendor.352e3120.js";import"./useDrawer.3628b9ed.js";import"./ArrowLeftOutlined.7dae0225.js";import"./index.8c7a9c9a.js";import"./useFormItem.23c9ece5.js";import"./index.658efdb1.js";import"./index.f208c793.js";import"./user.45434715.js";import"./transButton.bd1bd746.js";import"./useModal.2752a197.js";import"./useWindowSizeFn.fee40caf.js";import"./FullscreenOutlined.fdd43b18.js";import"./index.ffba0b1a.js";import"./css.b1edd3c8.js";import"./index.1aad4d44.js";import"./index.e5a6a79c.js";import"./uuid.2b29000c.js";import"./index.672abebf.js";import"./uniqBy.c4f2e7ec.js";import"./_baseIteratee.2e9463e3.js";import"./_baseProperty.74f89655.js";import"./findIndex.c7191173.js";import"./toInteger.e4331dbc.js";import"./index.68ce2096.js";import"./download.d97e990c.js";import"./index.03ecce9c.js";import"./index.9816e582.js";import"./UpOutlined.4269b743.js";import"./index.238a8995.js";import"./RedoOutlined.6634afa6.js";import"./dayjs.c72a52f8.js";import"./useState.9c0f957d.js";import"./index.f73b7b74.js";import"./Col.590da3fb.js";import"./responsiveObserve.7206f913.js";import"./canUseDom.0bf35682.js";import"./useSize.fb5b95d6.js";import"./useTable.f7c905cd.js";import"./PageWrapper.69acb2a5.js";import"./usePageContext.4aadab4f.js";import"./onMountedOrActivated.9d53918d.js";import"./index.a846e3a0.js";import"./index.4cbf17ba.js";import"./useBreakpoint.4a44e358.js";import"./common.1ec3dc60.js";import"./index.d98a3c80.js";import"./useSortable.f59e44e0.js";import"./SettingOutlined.31bf1a90.js";import"./useFullScreen.67aa57a8.js";import"./index.0c19262d.js";import"./scrollTo.c0c7cc64.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v584zM688 420h-55.2c-5.1 0-10 2.5-13 6.6L468.9 634.4l-64.7-89c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.4 0-12.8-6.5-12.8z"}}]},name:"carry-out",theme:"outlined"};function be(e){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?Object(arguments[o]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),l.forEach(function(m){he(e,m,a[m])})}return e}function he(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}var S=function(o,a){var l=be({},o,a.attrs);return s(Q,W(l,{icon:fe}),null)};S.displayName="CarryOutOutlined",S.inheritAttrs=!1;const w={GetMenuTree:{url:i.AUTHORITY+"/menu/tree1",method:r.POST},Page:{url:i.AUTHORITY+"/menu/page",method:r.POST},Save:{url:i.AUTHORITY+"/menu",method:r.POST},Update:{url:i.AUTHORITY+"/menu",method:r.PUT},Delete:{url:i.AUTHORITY+"/menu",method:r.DELETE},Query:{url:i.AUTHORITY+"/menu/query",method:r.POST},getMenuById:{url:i.AUTHORITY+"/menu/",method:r.GET}},je=()=>v.request(c({},w.GetMenuTree)),ye=e=>v.request({url:w.getMenuById.url+e,method:w.getMenuById.method}),{t}=X();t("lamp.system.menu.label"),t("lamp.system.menu.describe"),t("lamp.system.menu.isGeneral"),t("lamp.system.menu.path"),t("lamp.system.menu.component"),t("lamp.system.menu.state"),t("lamp.system.menu.sortValue"),t("lamp.system.menu.icon"),t("lamp.system.menu.group"),t("lamp.system.menu.parentId"),t("lamp.system.menu.readonly"),t("lamp.common.createTime"),t("lamp.common.createTime");const ge=[{field:"id",label:"ID",component:"Input",show:!1},{label:t("lamp.system.menu.label"),field:"label",component:"Input"},{label:t("lamp.system.menu.describe"),field:"describe",component:"Input"},{label:t("lamp.system.menu.isGeneral"),field:"isGeneral",component:"RadioButtonGroup",componentProps:{options:[{label:t("lamp.common.yes"),value:!0},{label:t("lamp.common.no"),value:!1}]}},{label:t("lamp.system.menu.path"),field:"path",component:"Input"},{label:t("lamp.system.menu.component"),field:"component",component:"Input"},{label:t("lamp.system.menu.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:"\u542F\u7528",value:!0},{label:"\u7981\u7528",value:!1}]}},{label:t("lamp.system.menu.sortValue"),field:"sortValue",component:"Input"},{field:"icon",label:t("lamp.system.menu.icon"),component:"IconPicker"},{label:t("lamp.system.menu.group"),field:"group",component:"Input"},{label:t("lamp.system.menu.readonly"),field:"readonly",component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:t("lamp.common.yes"),value:!0},{label:t("lamp.common.no"),value:!1}]}}],ve=e=>[],I={Page:{url:i.AUTHORITY+"/menu/page",method:r.POST},Save:{url:i.AUTHORITY+"/menu",method:r.POST},Update:{url:i.AUTHORITY+"/menu",method:r.PUT},Delete:{url:i.AUTHORITY+"/menu",method:r.DELETE},Query:{url:i.AUTHORITY+"/menu/query",method:r.POST}},Ie=e=>v.request(c(c({},I.Save),{params:e})),Te=e=>v.request(c(c({},I.Update),{params:e}));var P=J({components:{[C.name]:C,[U.name]:U,[M.name]:M,[E.name]:E,BasicTree:z,CarryOutOutlined:S,FormOutlined:de,BasicForm:ie,resource:me},setup(){const e=p(!1),o=p(!1),a=p(null),l=p([]),m=p(null),b=p([]);function u(){let n;e.value?(n=I.Update,A.EDIT):(n=I.Save,A.ADD),console.log("\u83B7\u53D6\u6821\u9A8C\u89C4\u5219"),ue(n,ve()).then(async d=>{console.log(d),d&&d.length>0&&await H(d)})}u(),K(e,()=>{u()});const T=(n,{selected:d})=>{if(!d)return;const _=n[0];a.value=_,ye(_).then(g=>{m.value=g,y(g),e.value=!0}),re({menuId:_}).then(g=>{b.value=g,console.log(b)})};D("selectedResourceData",b),D("currentMenuId",a);const[O,{resetFields:h,setFieldsValue:y,appendSchemaByField:R,updateSchema:H,validate:k}]=le({labelWidth:100,schemas:ge,showActionButtonGroup:!1,baseColProps:{lg:24}});async function L(){je().then(n=>{l.value=n,R({label:"\u7236\u7EA7\u83DC\u5355",field:"parentId",component:"TreeSelect",componentProps:{treeData:[{title:"\u6839\u8282\u70B9",value:0,key:0,children:n}],replaceFields:{value:"key"},getPopupContainer:()=>document.body}},null,!0)})}function V(n){console.log(n)}function B(n=null){e.value=!1,h(),y({parentId:n})}const Y=[{render:n=>F(ce,{class:"ml-2",onClick:()=>{V(n)}})},{render:()=>F(pe)}];Z(()=>{L()});function q({level:n}){return n===1?"ion:git-compare-outline":n===2?"ion:home":n===3?"ion:airplane":""}function G(){h()}async function $(){try{o.value=!0;const n=await k();e.value?await Te(n):await Ie(n)}finally{o.value=!1}}function N(n){return[{label:"\u65B0\u589E",handler:()=>{console.log(n),B(n.key)},icon:"bi:plus"},{label:"\u5220\u9664",handler:()=>{console.log("\u70B9\u51FB\u4E86\u5220\u9664",n.label)},icon:"bx:bxs-folder-open"}]}return{treeData:l,registerForm:O,handleSubmit:$,actionList:Y,createIcon:q,appendNodeByKey:B,selectNode:T,currentMenuId:a,selectedMenuData:m,selectedResourceData:b,getRightMenuList:N,resetForm:G,submitLoading:o,isEdit:e}}}),Jt=`.ant-card-body[data-v-c16eccf6] {
  padding: 0%;
}`;const f=se();ee("data-v-c16eccf6");const Oe={class:"overflow-hidden vben-page-wrapper-content flex",style:{height:"904px","min-height":"904px"}},_e={class:"bg-white m-4 mr-2 overflow-hidden w-1/5"},xe={style:{width:"100%",padding:"20px","background-color":"white"}},Se=x(" \u6DFB\u52A0\u6839\u8282\u70B9"),we={class:"bg-white m-4 ml-2 mr-2 overflow-hidden w-1/4"},Pe=x("\u91CD\u7F6E"),Re={class:"bg-white m-4 ml-2 overflow-hidden w-1/2"};te();const Be=f((e,o,a,l,m,b)=>{const u=j("a-button"),T=j("BasicTree"),O=j("BasicForm"),h=j("a-card"),y=j("resource");return ne(),oe("div",Oe,[s("div",_e,[s("div",xe,[s(u,{onClick:o[1]||(o[1]=R=>e.appendNodeByKey(0)),class:"mr-2"},{default:f(()=>[Se]),_:1})]),s(T,{title:"\u83DC\u5355\u6811",showLine:"",toolbar:"",treeData:e.treeData,actionList:e.actionList,renderIcon:e.createIcon,beforeRightClick:e.getRightMenuList,ref:"menuTreeRef",onSelect:e.selectNode},null,8,["treeData","actionList","renderIcon","beforeRightClick","onSelect"])]),s("div",we,[s(h,{title:"\u7F16\u8F91\u83DC\u5355",bordered:!1,style:{width:"100%"}},{default:f(()=>[s(O,{onRegister:e.registerForm,onSubmit:e.handleSubmit},null,8,["onRegister","onSubmit"]),s(u,{type:"primary",block:"",onClick:e.handleSubmit,loading:e.submitLoading},{default:f(()=>[x(ae(e.isEdit?"\u4FDD\u5B58\u4FEE\u6539":"\u63D0\u4EA4"),1)]),_:1},8,["onClick","loading"]),s(u,{block:"",style:{"margin-top":"10px"},onClick:e.resetForm},{default:f(()=>[Pe]),_:1},8,["onClick"])]),_:1})]),s("div",Re,[s(h,{title:"\u6743\u9650\u8D44\u6E90",bordered:!1,style:{width:"100%"}},{default:f(()=>[s(y,{dataList:e.selectedResourceData,currentMenuId:e.currentMenuId},null,8,["dataList","currentMenuId"])]),_:1})])])});P.render=Be,P.__scopeId="data-v-c16eccf6";export default P;
