var m=Object.assign;import{_ as T,a as P}from"./useDrawer.1dca4d34.js";import{_ as O}from"./BasicForm.8a90524a.js";import{u as B}from"./useForm.1103fde3.js";import{j as S,d as j,w as k,D as w,F as y,r as D,o as E,n as N,J as R,p as $,s as C}from"./index.b7a14d4f.js";import{A as p}from"./commonEnum.da040d67.js";import{A as _,u as U,s as L}from"./user.d5977986.js";import{g as V}from"./formValidateService.993b7545.js";import{f as M,a as c}from"./general.aeae067e.js";const{t:e}=S(),G=[{title:e("lamp.org.user.account"),dataIndex:"account"},{title:e("lamp.org.user.name"),dataIndex:"name"},{title:e("lamp.org.user.orgId"),dataIndex:"orgId"},{title:e("lamp.org.user.stationId"),dataIndex:"stationId"},{title:e("lamp.org.user.email"),dataIndex:"email"},{title:e("lamp.org.user.mobile"),dataIndex:"mobile"},{title:e("lamp.org.user.sex"),dataIndex:"sex"},{title:e("lamp.org.user.state"),dataIndex:"state"},{title:e("lamp.org.user.avatar"),dataIndex:"avatar"},{title:e("lamp.org.user.nation"),dataIndex:"nation"},{title:e("lamp.org.user.education"),dataIndex:"education"},{title:e("lamp.org.user.positionStatus"),dataIndex:"positionStatus"},{title:e("lamp.org.user.workDescribe"),dataIndex:"workDescribe"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],z=[{label:e("lamp.org.user.account"),field:"account",component:"Input",colProps:{span:5}},{label:e("lamp.org.user.name"),field:"name",component:"Input",colProps:{span:5}},{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],J=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.org.user.account"),field:"account",component:"Input"},{label:e("lamp.org.user.name"),field:"name",component:"Input"},{label:e("lamp.org.user.orgId"),field:"orgId",component:"Input"},{label:e("lamp.org.user.stationId"),field:"stationId",component:"Input"},{label:e("lamp.org.user.email"),field:"email",component:"Input"},{label:e("lamp.org.user.mobile"),field:"mobile",component:"Input"},{label:e("lamp.org.user.sex"),field:"sex",component:"ApiSelect",componentProps:{api:M,params:["Sex"],resultField:"Sex"}},{label:e("lamp.org.user.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.org.user.avatar"),field:"avatar",component:"Input"},{label:e("lamp.org.user.nation"),field:"nation",component:"ApiSelect",componentProps:{api:c,params:["NATION"],resultField:"NATION"}},{label:e("lamp.org.user.education"),field:"education",component:"ApiSelect",componentProps:{api:c,params:["EDUCATION"],resultField:"EDUCATION"}},{label:e("lamp.org.user.positionStatus"),field:"positionStatus",component:"ApiSelect",componentProps:{api:c,params:["POSITION_STATUS"],resultField:"POSITION_STATUS"}},{label:e("lamp.org.user.workDescribe"),field:"workDescribe",component:"Input"}],W=o=>[];var u=j({name:"UserEdit",components:{BasicDrawer:T,BasicForm:O},emits:["success","register"],setup(o,{emit:d}){const{t:s}=S(),t=k(p.ADD),{createMessage:f}=y(),[g,{setFieldsValue:r,resetFields:n,updateSchema:F,validate:h}]=B({labelWidth:100,schemas:J,showActionButtonGroup:!1,actionColOptions:{span:23}}),[x,{setDrawerProps:l,closeDrawer:v}]=P(async a=>{await n(),l({confirmLoading:!1}),t.value=a==null?void 0:a.type;let I=_.Save;const b=m({},a==null?void 0:a.record);w(t)===p.EDIT?I=_.Update:b.id=void 0,await r(m({},b)),V(I,W()).then(async i=>{i&&i.length>0&&await F(i)})});async function A(){try{const a=await h();l({confirmLoading:!0}),w(t)===p.EDIT?await U(a):await L(a),f.success(s(`common.tips.${t.value}Success`)),v(),d("success")}finally{l({confirmLoading:!1})}}return{t:s,registerDrawer:x,registerForm:g,type:t,handleSubmit:A}}});function q(o,d,s,t,f,g){const r=D("BasicForm"),n=D("BasicDrawer");return E(),N(n,C(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:o.t(`common.title.${o.type}`),onOk:o.handleSubmit}),{default:R(()=>[$(r,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}u.render=q;var H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:u});export{H as E,u as _,G as c,z as s};
