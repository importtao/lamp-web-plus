var m=Object.assign;import{_ as v}from"./BasicForm.71637030.js";import{u as _}from"./useForm.eec49fca.js";import{da as d,b_ as C,d as E,w as P,k as y,D as f,r as F,o as I,n as R,J as x,p as S,s as k}from"./index.0523a5a3.js";import{T as M}from"./index.c4d8ae58.js";import{_ as N,a as $}from"./useDrawer.78890a21.js";import{d as j}from"./system.ae521e3b.js";const T=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"menuName",width:200,align:"left"},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:e})=>d(C,{icon:e.icon})},{title:"\u6743\u9650\u6807\u8BC6",dataIndex:"permission",width:180},{title:"\u7EC4\u4EF6",dataIndex:"component"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const o=~~e.status==0,u=o?"green":"red",a=o?"\u542F\u7528":"\u505C\u7528";return d(M,{color:u},()=>a)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],V=e=>e==="0",b=e=>e==="1",n=e=>e==="2",A=[{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],G=[{field:"type",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u76EE\u5F55",value:"0"},{label:"\u83DC\u5355",value:"1"},{label:"\u6309\u94AE",value:"2"}]},colProps:{lg:24,md:24}},{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"parentMenu",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",componentProps:{replaceFields:{title:"menuName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"\u6392\u5E8F",component:"InputNumber",required:!0},{field:"icon",label:"\u56FE\u6807",component:"IconPicker",required:!0,show:({values:e})=>!n(e.type)},{field:"routePath",label:"\u8DEF\u7531\u5730\u5740",component:"Input",required:!0,show:({values:e})=>!n(e.type)},{field:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84",component:"Input",show:({values:e})=>b(e.type)},{field:"permission",label:"\u6743\u9650\u6807\u8BC6",component:"Input",show:({values:e})=>!V(e.type)},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u7981\u7528",value:"1"}]}},{field:"isExt",label:"\u662F\u5426\u5916\u94FE",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},show:({values:e})=>!n(e.type)},{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},show:({values:e})=>b(e.type)},{field:"show",label:"\u662F\u5426\u663E\u793A",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u662F",value:"0"},{label:"\u5426",value:"1"}]},show:({values:e})=>!n(e.type)}];var c=E({name:"MenuDrawer",components:{BasicDrawer:N,BasicForm:v},emits:["success","register"],setup(e,{emit:s}){const o=P(!0),[u,{resetFields:a,setFieldsValue:p,updateSchema:r,validate:l}]=_({labelWidth:100,schemas:G,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[w,{setDrawerProps:i,closeDrawer:h}]=$(async t=>{a(),i({confirmLoading:!1}),o.value=!!(t==null?void 0:t.isUpdate),f(o)&&p(m({},t.record));const g=await j();r({field:"parentMenu",componentProps:{treeData:g}})}),D=y(()=>f(o)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");async function B(){try{const t=await l();i({confirmLoading:!0}),console.log(t),h(),s("success")}finally{i({confirmLoading:!1})}}return{registerDrawer:w,registerForm:u,getTitle:D,handleSubmit:B}}});function q(e,s,o,u,a,p){const r=F("BasicForm"),l=F("BasicDrawer");return I(),R(l,k(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:x(()=>[S(r,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}c.render=q;var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:c});export{L as M,c as _,T as c,A as s};
