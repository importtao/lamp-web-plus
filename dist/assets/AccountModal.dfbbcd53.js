var m=Object.assign;import{_,a as B}from"./useModal.131645a5.js";import{_ as w}from"./BasicForm.71637030.js";import{u as I}from"./useForm.eec49fca.js";import{b as M,a as k}from"./system.ae521e3b.js";import{d as A,w as D,k as C,D as r,r as p,o as E,n as P,J as S,p as v,s as y}from"./index.0523a5a3.js";const $=[{title:"\u7528\u6237\u540D",dataIndex:"account",width:120},{title:"\u6635\u79F0",dataIndex:"nickname",width:120},{title:"\u90AE\u7BB1",dataIndex:"email",width:120},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u89D2\u8272",dataIndex:"role",width:200},{title:"\u5907\u6CE8",dataIndex:"remark"}],j=[{field:"account",label:"\u7528\u6237\u540D",component:"Input",colProps:{span:8}},{field:"nickname",label:"\u6635\u79F0",component:"Input",colProps:{span:8}}],q=[{field:"account",label:"\u7528\u6237\u540D",component:"Input",required:!0},{field:"pwd",label:"\u5BC6\u7801",component:"InputPassword",required:!0,show:!1},{label:"\u89D2\u8272",field:"role",component:"ApiSelect",componentProps:{api:M,labelField:"roleName",valueField:"roleValue"},required:!0},{field:"dept",label:"\u6240\u5C5E\u90E8\u95E8",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"nickname",label:"\u6635\u79F0",component:"Input",required:!0},{label:"\u90AE\u7BB1",field:"email",component:"Input",required:!0},{label:"\u5907\u6CE8",field:"remark",component:"InputTextArea"}];var u=A({name:"AccountModal",components:{BasicModal:_,BasicForm:w},emits:["success","register"],setup(e,{emit:l}){const t=D(!0),[i,{setFieldsValue:c,updateSchema:d,resetFields:a,validate:n}]=I({labelWidth:100,schemas:q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[f,{setModalProps:s,closeModal:F}]=B(async o=>{a(),s({confirmLoading:!1}),t.value=!!(o==null?void 0:o.isUpdate),r(t)&&c(m({},o.record));const h=await k();d([{field:"pwd",show:!r(t)},{field:"dept",componentProps:{treeData:h}}])}),g=C(()=>r(t)?"\u7F16\u8F91\u8D26\u53F7":"\u65B0\u589E\u8D26\u53F7");async function b(){try{const o=await n();s({confirmLoading:!0}),console.log(o),F(),l("success")}finally{s({confirmLoading:!1})}}return{registerModal:f,registerForm:i,getTitle:g,handleSubmit:b}}});function x(e,l,t,i,c,d){const a=p("BasicForm"),n=p("BasicModal");return E(),P(n,y(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:S(()=>[v(a,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}u.render=x;var T=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:u});export{T as A,u as _,$ as c,j as s};
