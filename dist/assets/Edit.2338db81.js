var c=Object.assign;import{_ as k,a as j}from"./useDrawer.3628b9ed.js";import{_ as E}from"./BasicForm.ba267815.js";import{u as R}from"./useForm.93cfb83b.js";import{j as b,d as $,w as A,D as g,di as C,F as T,r as w,o as x,n as P,J as M,p as O,s as V}from"./index.b6dfbfcf.js";import{A as p}from"./commonEnum.da040d67.js";import{A as h,u as G,s as L}from"./materialsBaseInfo.088d13df.js";import{g as U}from"./formValidateService.c9ec958e.js";const{t:e}=b(),z=[{title:e("lamp.materials.materialsBaseInfo.name"),dataIndex:"name"},{title:e("lamp.materials.materialsBaseInfo.unit"),dataIndex:"unit"},{title:e("lamp.materials.materialsBaseInfo.useScene"),dataIndex:"useScene"},{title:e("lamp.materials.materialsBaseInfo.imgUrl"),dataIndex:"imgUrl"},{title:"\u9886\u7528\u6B21\u6570",dataIndex:"claimQuantity"},{title:e("lamp.materials.materialsBaseInfo.remark"),dataIndex:"remark"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],J=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],N=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.materialsBaseInfo.name"),field:"name",component:"Input"},{label:e("lamp.materials.materialsBaseInfo.unit"),field:"unit",component:"Input"},{label:e("lamp.materials.materialsBaseInfo.useScene"),field:"useScene",component:"Input"},{label:"\u641C\u7D22\u5173\u952E\u8BCD",field:"keyword",component:"Input"},{label:e("lamp.materials.materialsBaseInfo.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.materialsBaseInfo.version"),field:"version",component:"Input",show:!1},{label:e("lamp.materials.materialsBaseInfo.isDelete"),field:"isDelete",component:"RadioButtonGroup",show:!1,componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],Q=s=>[];var u=$({name:"MaterialsBaseInfoEdit",components:{BasicDrawer:k,BasicForm:E},emits:["success","register"],setup(s,{emit:d}){const f=C(),{t:n}=b(),t=A(p.ADD),{createMessage:I}=T(),[r,{setFieldsValue:i,resetFields:D,updateSchema:_,validate:v}]=R({labelWidth:100,schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[F,{setDrawerProps:l,closeDrawer:S}]=j(async a=>{await D(),l({confirmLoading:!1}),t.value=a==null?void 0:a.type;let o=h.Save;const B=c({},a==null?void 0:a.record);g(t)===p.EDIT?o=h.Update:B.id=void 0,await i(c({},B)),U(o,Q()).then(async m=>{m&&m.length>0&&await _(m)})});async function y(){try{const a=await v();a.disabled=!1,l({confirmLoading:!0}),g(t)===p.EDIT?await G(a):(a.disabled=!1,await L(a).then(o=>{f("/inner/materialsEdit/"+o.id)})),I.success(n(`common.tips.${t.value}Success`)),S(),d("success")}finally{l({confirmLoading:!1})}}return{t:n,registerDrawer:F,registerForm:r,type:t,handleSubmit:y}}});function W(s,d,f,n,t,I){const r=w("BasicForm"),i=w("BasicDrawer");return x(),P(i,V(s.$attrs,{onRegister:s.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:s.t(`common.title.${s.type}`),onOk:s.handleSubmit}),{default:M(()=>[O(r,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}u.render=W;var q=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:u});export{q as E,u as _,z as c,J as s};
