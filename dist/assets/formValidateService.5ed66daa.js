import{be as F,cu as f}from"./index.0523a5a3.js";import{S as k}from"./commonEnum.da040d67.js";k.AUTHORITY+"",f.POST;function d(r,c,n){if(r){let g=new Date;return n==="Past"?g>r:n==="Future"?g<r:!1}}const x=(r,c)=>{let g=r.url.split("/");console.log(g),console.log(g.length);let t="",i=0;return g.forEach(p=>{p.length<1||p==" "||(i==0?t=t.concat("/",p,"/form/validator"):t=t.concat("/",p),i++)}),F.request({url:t,method:r.method}).then(p=>{const h=[];return p.forEach(({field:o,fieldType:l,constraints:b})=>{const u=[];switch(l){case"Float":u.push({type:"number",message:`${o}\u5FC5\u987B\u662F\u6570\u5B57`});break;case"Array":u.push({type:"array",message:`${o}\u5FC5\u987B\u662F\u6570\u7EC4`});break;case"Boolean":u.push({type:"boolean",message:`${o}\u5FC5\u987B\u662F\u5E03\u5C14\u7C7B\u578B`});break;case"Date":u.push({type:"date",message:`${o}\u5FC5\u987B\u662F\u65E5\u671F\u7C7B\u578B`});break}b.forEach(({type:y,attrs:e})=>{switch(y){case"RegEx":u.push({type:"regexp",pattern:new RegExp(e.regexp),message:e.message});break;case"Max":u.push({type:"method",validator(m,a,s){parseInt(a)>e.value?s(e.message):s()},message:e.message});break;case"Min":u.push({type:"method",validator(m,a,s){parseInt(a)<e.value?s(e.message):s()},message:e.message});break;case"DecimalMax":u.push({type:"method",validator(m,a,s){parseFloat(a)>e.value?s(e.message):s()},message:e.message});break;case"DecimalMin":u.push({type:"method",validator(m,a,s){parseFloat(a)<e.value?s(e.message):s()},message:e.message});break;case"Null":u.push({type:"method",validator(m,a,s){a.length!==0?s(e.message):s()},message:e.message});break;case"NotNull":u.push({required:!0,whitespace:!0,message:e.message});break;case"Range":u.push({max:e.max,min:e.min,message:e.message});break;case"AssertTrue":u.push({type:"method",validator(m,a,s){a==="true"||a===!0?s():s(e.message)},message:e.message});break;case"AssertFalse":u.push({type:"method",validator(m,a,s){a==="false"||a===!1?s():s(e.message)},message:e.message});break;case"Past":u.push({type:"method",validator:(m,a,s)=>{d(a,l,"Past")?s():s(e.message)},message:e.message});break;case"Future":u.push({type:"method",validator:(m,a,s)=>{d(a,l,"Future")?s():s(e.message)},message:e.message})}}),h.push({field:o,rules:u})}),console.log(h),h.push(...c),new Promise(o=>{o(h)})})};export{x as g};
