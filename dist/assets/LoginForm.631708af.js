import{_ as N,u as V,a as A,L as I,b as U}from"./LoginFormTitle.d05d02fb.js";import{p as n,s as F,I as L,d as H,B as G,v as T,j as _,g as q,u as J,w as M,x as W,y as P,z as Q,A as z,C as X,k as Y,D as Z,K,E as x,F as ee,r as u,o as te,n as ne,G as b,H as v,J as a,L as y,q as h,M as ae}from"./index.b7a14d4f.js";import{C as E,R}from"./index.173fb3cc.js";import{C as oe}from"./index.18e73f7c.js";import{F as $}from"./index.b5e3a742.js";import{D as se}from"./index.f8f362f5.js";import"./vendor.352e3120.js";import"./Col.deca4875.js";import"./responsiveObserve.0e84fd18.js";import"./canUseDom.0bf35682.js";import"./_baseIteratee.580b2020.js";import"./get.17b5f080.js";import"./hasIn.55ea5e75.js";import"./_baseProperty.74f89655.js";import"./findIndex.ca0f29b6.js";import"./toInteger.085db34b.js";import"./useSize.a97ab731.js";var re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingding",theme:"outlined"};function le(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),r.forEach(function(l){ie(e,l,o[l])})}return e}function ie(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var D=function(t,o){var r=le({},t,o.attrs);return n(L,F(r,{icon:re}),null)};D.displayName="DingdingOutlined",D.inheritAttrs=!1;var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"};function me(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),r.forEach(function(l){de(e,l,o[l])})}return e}function de(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var j=function(t,o){var r=me({},t,o.attrs);return n(L,F(r,{icon:ue}),null)};j.displayName="MobileOutlined",j.inheritAttrs=!1;var B=H({name:"LoginForm",components:{[E.name]:E,[R.name]:R,Checkbox:oe,Button:G,Form:$,FormItem:$.Item,Input:T,Divider:se,LoginFormTitle:N,InputPassword:T.Password,DingdingOutlined:D,MobileOutlined:j},setup(){const{t:e}=_(),{notification:t}=ee(),{prefixCls:o}=q("login"),r=J(),{setLoginState:l,getLoginState:k}=V(),{getFormRules:O}=A(),d=M(null),i=M(!1);W(()=>{p()});const S=P({tenant:"",tenantView:"0000",account:"lamp",password:"lamp",code:"",grantType:r.showCaptcha==="true"?"captcha":"password",key:Q(24,16),verify:void 0}),m=P({loading:!1,captchaSrc:"",isMultiTenant:r.multiTenantType!=="NONE",showCaptcha:r.showCaptcha==="true"});async function p(){const f=await z.loadCaptcha({key:S.key});m.captchaSrc=f}const{validForm:C}=U(d);X(["enter"],f=>{f.keyCode===K.ENTER&&w()});const c=Y(()=>Z(k)===I.LOGIN);async function w(){const f=await C();if(!!f)try{m.loading=!0;const g=await z.login(x(f));g?t.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${g.name}`,duration:3}):p()}finally{m.loading=!1}}return{t:e,prefixCls:o,formRef:d,formData:S,getFormRules:O,rememberMe:i,handleLogin:w,loadCaptcha:p,setLoginState:l,LoginStateEnum:I,getShow:c,formState:m}}});function fe(e,t,o,r,l,k){const O=u("LoginFormTitle"),d=u("Input"),i=u("FormItem"),S=u("InputPassword"),m=u("ACol"),p=u("ARow"),C=u("Checkbox"),c=u("Button"),w=u("MobileOutlined"),f=u("DingdingOutlined"),g=u("Form");return te(),ne(ae,null,[b(n(O,{class:"enter-x"},null,512),[[v,e.getShow]]),b(n(g,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:a(()=>[n(i,{name:"grantType"},{default:a(()=>[n(d,{size:"large",value:e.formData.grantType,"onUpdate:value":t[1]||(t[1]=s=>e.formData.grantType=s),hidden:!0},null,8,["value"])]),_:1}),n(i,{name:"key"},{default:a(()=>[n(d,{size:"large",value:e.formData.key,"onUpdate:value":t[2]||(t[2]=s=>e.formData.key=s),hidden:!0},null,8,["value"])]),_:1}),b(n(i,{name:"tenantView",class:"enter-x"},{default:a(()=>[n(d,{size:"large",value:e.formData.tenantView,"onUpdate:value":t[3]||(t[3]=s=>e.formData.tenantView=s),placeholder:e.t("sys.login.tenant")},null,8,["value","placeholder"])]),_:1},512),[[v,e.formState.isMultiTenant]]),n(i,{name:"account",class:"enter-x"},{default:a(()=>[n(d,{size:"large",value:e.formData.account,"onUpdate:value":t[4]||(t[4]=s=>e.formData.account=s),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),n(i,{name:"password",class:"enter-x"},{default:a(()=>[n(S,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":t[5]||(t[5]=s=>e.formData.password=s),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])]),_:1}),b(n(p,{class:"enter-x"},{default:a(()=>[n(m,null,{default:a(()=>[n(i,{class:"code-input",name:"code"},{default:a(()=>[n(d,{size:"large",visibilityToggle:"",value:e.formData.code,"onUpdate:value":t[6]||(t[6]=s=>e.formData.code=s),placeholder:e.t("sys.login.captcha")},null,8,["value","placeholder"])]),_:1}),b(n("img",{src:e.formState.captchaSrc,onClick:t[7]||(t[7]=(...s)=>e.loadCaptcha&&e.loadCaptcha(...s)),alt:"captcha",class:"code-image"},null,8,["src"]),[[v,!0]])]),_:1})]),_:1},512),[[v,e.formState.showCaptcha]]),n(p,{class:"enter-x"},{default:a(()=>[n(m,{span:12},{default:a(()=>[n(i,null,{default:a(()=>[n(C,{checked:e.rememberMe,"onUpdate:checked":t[8]||(t[8]=s=>e.rememberMe=s),size:"small"},{default:a(()=>[y(h(e.t("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),n(m,{span:12},{default:a(()=>[n(i,{style:{"text-align":"right"}},{default:a(()=>[n(c,{type:"link",size:"small",onClick:t[9]||(t[9]=s=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:a(()=>[y(h(e.t("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(i,{class:"enter-x"},{default:a(()=>[n(c,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.formState.loading},{default:a(()=>[y(h(e.t("sys.login.loginButton")),1)]),_:1},8,["onClick","loading"])]),_:1}),n(p,{class:"enter-x"},{default:a(()=>[n(m,{xs:24,md:12},{default:a(()=>[n(c,{block:"",onClick:t[10]||(t[10]=s=>e.setLoginState(e.LoginStateEnum.MOBILE))},{default:a(()=>[n(w),y(" "+h(e.t("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),n(m,{md:11,xs:24,class:"xs:my-2 md:my-0 xs:mx-0 md:mx-2"},{default:a(()=>[n(c,{block:""},{default:a(()=>[n(f),y(" "+h(e.t("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[v,e.getShow]])],64)}B.render=fe;export default B;
