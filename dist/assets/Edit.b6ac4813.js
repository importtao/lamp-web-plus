var r=Object.assign;import{_ as j,a as k}from"./useDrawer.9766a9b2.js";import{_ as A}from"./BasicForm.7d393d3b.js";import{u as F}from"./useForm.09fdf95d.js";import{cu as m,be as l,j as S,h as y,d as M,w as B,D as T,F as q,r as b,o as L,n as $,J as x,p as Y,s as C}from"./index.ff8e7350.js";import{S as i,A as f}from"./commonEnum.da040d67.js";import{g as N}from"./formValidateService.a395f7ea.js";const o={Page:{url:i.MATERIALS+"/claimOrder/page",method:m.POST},Save:{url:i.MATERIALS+"/claimOrder",method:m.POST},Update:{url:i.MATERIALS+"/claimOrder",method:m.PUT},Delete:{url:i.MATERIALS+"/claimOrder",method:m.DELETE},Query:{url:i.MATERIALS+"/claimOrder/query",method:m.POST}},V=a=>l.request(r(r({},o.Page),{params:a})),U=a=>l.request(r(r({},o.Save),{params:a})),H=a=>l.request(r(r({},o.Update),{params:a})),G=a=>l.request(r(r({},o.Delete),{params:a})),{t:e}=S(),z=[{title:e("lamp.materials.claimOrder.isProject"),dataIndex:"isProject"},{title:e("lamp.materials.claimOrder.requireTime"),dataIndex:"requireTime"},{title:e("lamp.materials.claimOrder.projectName"),dataIndex:"projectName"},{title:e("lamp.materials.claimOrder.processInstanceId"),dataIndex:"processInstanceId"},{title:e("lamp.materials.claimOrder.status"),dataIndex:"status"},{title:e("lamp.materials.claimOrder.remark"),dataIndex:"remark"},{title:e("lamp.materials.claimOrder.auditRemark"),dataIndex:"auditRemark"},{title:e("lamp.materials.claimOrder.useOrgId"),dataIndex:"useOrgId"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],J=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.claimOrder.isProject"),field:"isProject",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.materials.claimOrder.requireTime"),field:"requireTime",component:"DatePicker",componentProps:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",showTime:{defaultValue:y("00:00:00","HH:mm:ss")}}},{label:e("lamp.materials.claimOrder.projectName"),field:"projectName",component:"Input"},{label:e("lamp.materials.claimOrder.processInstanceId"),field:"processInstanceId",component:"Input"},{label:e("lamp.materials.claimOrder.status"),field:"status",component:"Input"},{label:e("lamp.materials.claimOrder.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.claimOrder.auditRemark"),field:"auditRemark",component:"Input"},{label:e("lamp.materials.claimOrder.useOrgId"),field:"useOrgId",component:"Input"}],W=a=>[];var I=M({name:"ClaimOrderEdit",components:{BasicDrawer:j,BasicForm:A},emits:["success","register"],setup(a,{emit:O}){const{t:n}=S(),s=B(f.ADD),{createMessage:g}=q(),[h,{setFieldsValue:c,resetFields:d,updateSchema:R,validate:v}]=F({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[P,{setDrawerProps:p,closeDrawer:_}]=k(async t=>{await d(),p({confirmLoading:!1}),s.value=t==null?void 0:t.type;let w=o.Save;const D=r({},t==null?void 0:t.record);T(s)===f.EDIT?w=o.Update:D.id=void 0,await c(r({},D)),N(w,W()).then(async u=>{u&&u.length>0&&await R(u)})});async function E(){try{const t=await v();p({confirmLoading:!0}),T(s)===f.EDIT?await H(t):await U(t),g.success(n(`common.tips.${s.value}Success`)),_(),O("success")}finally{p({confirmLoading:!1})}}return{t:n,registerDrawer:P,registerForm:h,type:s,handleSubmit:E}}});function K(a,O,n,s,g,h){const c=b("BasicForm"),d=b("BasicDrawer");return L(),$(d,C(a.$attrs,{onRegister:a.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:a.t(`common.title.${a.type}`),onOk:a.handleSubmit}),{default:x(()=>[Y(c,{onRegister:a.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}I.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:I});export{X as E,I as _,z as c,V as p,G as r,J as s};
