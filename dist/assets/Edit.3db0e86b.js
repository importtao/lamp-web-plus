var t=Object.assign;import{_ as R,a as j}from"./useDrawer.78890a21.js";import{_ as P}from"./BasicForm.71637030.js";import{u as B}from"./useForm.eec49fca.js";import{cu as n,be as i,j as D,d as L,w as $,D as v,F as M,r as b,o as O,n as k,J as q,p as C,s as x}from"./index.0523a5a3.js";import{S as c,A as g}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.5ed66daa.js";const r={Page:{url:c.MATERIALS+"/category/page",method:n.POST},Save:{url:c.MATERIALS+"/category",method:n.POST},Update:{url:c.MATERIALS+"/category",method:n.PUT},Delete:{url:c.MATERIALS+"/category",method:n.DELETE},Query:{url:c.MATERIALS+"/category/query",method:n.POST}},V=e=>i.request(t(t({},r.Page),{params:e})),G=e=>i.request(t(t({},r.Save),{params:e})),z=e=>i.request(t(t({},r.Update),{params:e})),H=e=>i.request(t(t({},r.Delete),{params:e})),{t:a}=D(),J=[{title:a("lamp.materials.category.objectId"),dataIndex:"objectId"},{title:a("lamp.materials.category.type"),dataIndex:"type"},{title:a("lamp.materials.category.categoryId"),dataIndex:"categoryId"},{title:a("lamp.materials.category.version"),dataIndex:"version"},{title:a("lamp.materials.category.isDelete"),dataIndex:"isDelete"},{title:a("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:a("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:a("lamp.materials.category.objectId"),field:"objectId",component:"Input"},{label:a("lamp.materials.category.type"),field:"type",component:"Input"},{label:a("lamp.materials.category.categoryId"),field:"categoryId",component:"Input"},{label:a("lamp.materials.category.version"),field:"version",component:"Input"},{label:a("lamp.materials.category.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:a("lamp.common.yes"),value:!0},{label:a("lamp.common.no"),value:!1}]}}],W=e=>[];var f=L({name:"CategoryEdit",components:{BasicDrawer:R,BasicForm:P},emits:["success","register"],setup(e,{emit:y}){const{t:l}=D(),s=$(g.ADD),{createMessage:I}=M(),[h,{setFieldsValue:m,resetFields:p,updateSchema:_,validate:E}]=B({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[T,{setDrawerProps:d,closeDrawer:A}]=j(async o=>{await p(),d({confirmLoading:!1}),s.value=o==null?void 0:o.type;let S=r.Save;const w=t({},o==null?void 0:o.record);v(s)===g.EDIT?S=r.Update:w.id=void 0,await m(t({},w)),U(S,W()).then(async u=>{u&&u.length>0&&await _(u)})});async function F(){try{const o=await E();d({confirmLoading:!0}),v(s)===g.EDIT?await z(o):await G(o),I.success(l(`common.tips.${s.value}Success`)),A(),y("success")}finally{d({confirmLoading:!1})}}return{t:l,registerDrawer:T,registerForm:h,type:s,handleSubmit:F}}});function K(e,y,l,s,I,h){const m=b("BasicForm"),p=b("BasicDrawer");return O(),k(p,x(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:e.t(`common.title.${e.type}`),onOk:e.handleSubmit}),{default:q(()=>[C(m,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,V as p,H as r,N as s};
