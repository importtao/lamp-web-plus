import{_ as v,a as w}from"./useModal.31640c24.js";import{u as A}from"./useFormItem.828d968c.js";import{d as F,aC as r,w as l,bY as B,j as T,k as O,ap as U,aB as $,r as f,o as M,n as R,J as I,p as P,s as q}from"./index.f012a3f4.js";import{T as E,q as L}from"./user.8beb92fb.js";import{g as W}from"./get.4bb36d6d.js";import"./useWindowSizeFn.21617b5b.js";import"./FullscreenOutlined.db659752.js";import"./vendor.352e3120.js";import"./index.6b5846e1.js";import"./transButton.77ed102e.js";import"./DeleteOutlined.4af221e4.js";import"./commonEnum.da040d67.js";var y=F({name:"UserTransfer",components:{Transfer:E,BasicModal:v},props:{value:r.string,multiple:r.bool,numberToString:r.bool,targetKeysApi:{type:Function,default:null},params:{type:Object,default:()=>{}},targetKeysParams:{type:Object,default:()=>{}},resultField:r.string.def("")},emits:["handleSelectChange","handleChange","handleScroll"],setup(e,{emit:s}){const i=l({}),p=l([]),o=l([]),d=l([]),c=B(),{t:u}=T(),[n]=A(e),h=O(()=>o.value);U(()=>{S()});const b=(t,a,g)=>{console.log("targetKeys: ",t),console.log("direction: ",a),console.log("moveKeys: ",g),s("handleSelectChange",null)},C=(t,a)=>{console.log("sourceSelectedKeys: ",t),console.log("targetSelectedKeys: ",a),s("handleChange",null)},K=(t,a)=>{s("handleScroll",null)};async function S(){try{const t=await L(e.params);if(Array.isArray(t)){o.value=t.map(m=>({key:m.id,title:m.name,description:m.name,disabled:!1}));return}e.resultField&&(o.value=W(t,e.resultField)||[]);const a=e.targetKeysApi;if(!a||!$(a))return;const g=await a(e.targetKeysParams);Array.isArray(t)&&(d.value=g)}catch(t){console.warn(t)}finally{}}function j(){console.log()}const[k]=w(t=>{i.value={users:t}});return{state:n,attrs:c,allUser:o,t:u,getAllUserList:h,handleSelectChange:C,handleChange:b,handleScroll:K,modelRef:i,targetKeys:d,selectedKeys:p,save:j,register:k}}});function z(e,s,i,p,o,d){const c=f("Transfer"),u=f("BasicModal");return M(),R(u,q(e.$attrs,{onRegister:e.register,title:"\u9009\u62E9\u7528\u6237",width:"600px"}),{default:I(()=>[P(c,{"target-keys":e.targetKeys,"onUpdate:target-keys":s[1]||(s[1]=n=>e.targetKeys=n),"selected-keys":e.selectedKeys,"onUpdate:selected-keys":s[2]||(s[2]=n=>e.selectedKeys=n),"data-source":e.getAllUserList,titles:["\u5168\u90E8\u7528\u6237","\u5DF2\u9009\u7528\u6237"],render:n=>n.title,"show-search":"",oneWay:"","list-style":{width:"250px",height:"600px"},onChange:e.handleChange,onSelectChange:e.handleSelectChange,onScroll:e.handleScroll,onOk:e.save},null,8,["target-keys","selected-keys","data-source","render","onChange","onSelectChange","onScroll","onOk"])]),_:1},16,["onRegister"])}y.render=z;export default y;
