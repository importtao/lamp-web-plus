var a=Object.assign;import{_ as R,a as P}from"./useDrawer.9766a9b2.js";import{_ as O}from"./BasicForm.7d393d3b.js";import{u as B}from"./useForm.09fdf95d.js";import{cu as i,be as l,j as h,d as U,w as j,D as S,F as $,r as D,o as x,n as k,J as q,p as H,s as C}from"./index.ff8e7350.js";import{S as p,A as f}from"./commonEnum.da040d67.js";import{g as L}from"./formValidateService.a395f7ea.js";import{f as Y}from"./general.be41d1ae.js";const n={Page:{url:p.AUTHORITY+"/application/page",method:i.POST},Save:{url:p.AUTHORITY+"/application",method:i.POST},Update:{url:p.AUTHORITY+"/application",method:i.PUT},Delete:{url:p.AUTHORITY+"/application",method:i.DELETE},Query:{url:p.AUTHORITY+"/application/query",method:i.POST}},V=t=>l.request(a(a({},n.Page),{params:t})),M=t=>l.request(a(a({},n.Save),{params:t})),G=t=>l.request(a(a({},n.Update),{params:t})),z=t=>l.request(a(a({},n.Delete),{params:t})),{t:e}=h(),J=[{title:e("lamp.system.application.clientId"),dataIndex:"clientId"},{title:e("lamp.system.application.clientSecret"),dataIndex:"clientSecret"},{title:e("lamp.system.application.website"),dataIndex:"website"},{title:e("lamp.system.application.name"),dataIndex:"name"},{title:e("lamp.system.application.icon"),dataIndex:"icon"},{title:e("lamp.system.application.appType"),dataIndex:"appType"},{title:e("lamp.system.application.describe"),dataIndex:"describe"},{title:e("lamp.system.application.state"),dataIndex:"state"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{label:e("lamp.system.application.name"),field:"name",component:"Input",colProps:{span:5}},{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.application.clientId"),field:"clientId",component:"Input"},{label:e("lamp.system.application.clientSecret"),field:"clientSecret",component:"Input"},{label:e("lamp.system.application.website"),field:"website",component:"Input"},{label:e("lamp.system.application.name"),field:"name",component:"Input"},{label:e("lamp.system.application.icon"),field:"icon",component:"Upload"},{label:e("lamp.system.application.appType"),field:"appType",component:"ApiSelect",componentProps:{api:Y,params:["ApplicationAppTypeEnum"],resultField:"ApplicationAppTypeEnum"}},{label:e("lamp.system.application.describe"),field:"describe",component:"Input"},{label:e("lamp.system.application.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],W=t=>[];var y=U({name:"ApplicationEdit",components:{BasicDrawer:R,BasicForm:O},emits:["success","register"],setup(t,{emit:b}){const{t:c}=h(),o=j(f.ADD),{createMessage:I}=$(),[T,{setFieldsValue:m,resetFields:r,updateSchema:_,validate:v}]=B({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[A,{setDrawerProps:d,closeDrawer:F}]=P(async s=>{await r(),d({confirmLoading:!1}),o.value=s==null?void 0:s.type;let g=n.Save;const w=a({},s==null?void 0:s.record);S(o)===f.EDIT?g=n.Update:w.id=void 0,await m(a({},w)),L(g,W()).then(async u=>{u&&u.length>0&&await _(u)})});async function E(){try{const s=await v();d({confirmLoading:!0}),S(o)===f.EDIT?await G(s):await M(s),I.success(c(`common.tips.${o.value}Success`)),F(),b("success")}finally{d({confirmLoading:!1})}}return{t:c,registerDrawer:A,registerForm:T,type:o,handleSubmit:E}}});function K(t,b,c,o,I,T){const m=D("BasicForm"),r=D("BasicDrawer");return x(),k(r,C(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:q(()=>[H(m,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}y.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:y});export{X as E,y as _,J as c,V as p,z as r,N as s};
