import R from"./GrowCard.e967550b.js";import{be as T,d as G,aY as I,w as y,y as k,x as $,bf as N,aW as P,aX as U,r as _,o as b,n as E,p as t,M as W,aE as M,aF as X}from"./index.0523a5a3.js";import{growCardList as z}from"./data.e39bf229.js";import{u as v}from"./useECharts.db0a31b5.js";import{R as B,C as j}from"./index.4637d8b2.js";import"./index.bd8eeb4f.js";import"./analysis-down.2ca5edf2.js";import"./vendor.352e3120.js";import"./analysis-icon4.e047d313.js";import"./Col.102f0df6.js";import"./responsiveObserve.43c11602.js";import"./canUseDom.0bf35682.js";var x;(function(o){o.GetVisitList="/authority/dashboard/visit"})(x||(x={}));const H=()=>T.get({url:x.GetVisitList});function O(o){return{color:["#487EC1","#48B9C1","#A27DE2","#32C0D6"],title:{text:o||"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",left:"left",data:["\u76F4\u63A5\u8BBF\u95EE","\u90AE\u4EF6\u8425\u9500","\u8054\u76DF\u5E7F\u544A","\u89C6\u9891\u5E7F\u544A","\u641C\u7D22\u5F15\u64CE"]},series:[{name:"\u8BBF\u95EE\u6765\u6E90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76F4\u63A5\u8BBF\u95EE"},{value:310,name:"\u90AE\u4EF6\u8425\u9500"},{value:234,name:"\u8054\u76DF\u5E7F\u544A"},{value:135,name:"\u89C6\u9891\u5E7F\u544A"},{value:1548,name:"\u641C\u7D22\u5F15\u64CE"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function Y(o){return{backgroundColor:"#FFF",color:["#487EC1","#48B9C1","#A27DE2","#32C0D6"],title:{text:o,top:0,left:"0",textStyle:{color:"#487EC1",fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},legend:{data:[],left:"center",top:"0"},grid:{top:"20%",left:"0",right:"0",bottom:"0",containLabel:!0,show:!1},xAxis:{type:"category",axisPointer:{type:"shadow"},boundaryGap:!0,splitLine:{show:!1,lineStyle:{type:"dashed",color:"#DDD"}},axisLine:{show:!1,lineStyle:{color:"#333"}},data:[]},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#DDD"}},axisLine:{show:!1,lineStyle:{color:"#333"}},nameTextStyle:{color:"#999"},splitArea:{show:!1}},series:[]}}var S=G({name:"Welcome",components:{GrowCard:R,CollapseContainer:I,[B.name]:B,[j.name]:j},setup(){const o=y(null),h=y(null),C=y(null),F=v(o).setOptions,A=v(h).setOptions,D=v(C).setOptions,l=k({growCardList:z,lastTenVisitCount:[],lastTenUserVisitCount:[]});$(()=>{d()});async function d(){const e=await H();l.growCardList[0].price=Number(e.userCount),l.growCardList[1].price=Number(e.todayIp),l.growCardList[2].price=Number(e.totalVisitCount),l.growCardList[3].price=Number(e.todayVisitCount),c(e.lastTenVisitCount,e.lastTenUserVisitCount),p(e.browserCount),m(e.operatingSystemCount)}function c(e,n){const r=[],u=[],i=[],s=Y();for(let w=9;w>=0;w--){const g=N(new Date(new Date().getTime()-24*60*60*1e3*w),"{y}-{m}-{d}");let V=!1;for(const f of e)if(f.login_date===g){V=!0,r.push(f.count);break}V||r.push(0);let L=!1;for(const f of n)if(f.login_date===g){L=!0,i.push(f.count);break}L||i.push(0),u.push(g)}s.legend.data=["\u6211\u7684","\u603B\u7684"],s.xAxis.data=u,s.series.push({name:"\u6211\u7684",type:"bar",barWidth:"25%",color:"rgb(0, 227, 150)",data:i}),s.series.push({name:"\u603B\u7684",type:"line",barWidth:"25%",color:"rgb(0, 143, 251)",data:r}),F(s)}function p(e){if(!e)return;const n=O(),r=[],u=[];e.forEach(i=>{const s=i.browser||"\u672A\u77E5";u.push({value:i.count,name:s}),r.push(s)}),n.series[0].data=u,n.legend.data=r,A(n)}function m(e){if(!e)return;const n=O(),r=[],u=[];e.forEach(i=>{const s=i.operating_system||"\u672A\u77E5";u.push({value:i.count,name:s}),r.push(s)}),n.series[0].data=u,n.legend.data=r,D(n)}return{formState:l,tenVisitRef:o,browserRef:h,operatingSystemRef:C}}}),pe=`.analysis[data-v-6b4fc7a2] {
  width: 100%;
}`;const a=X();P("data-v-6b4fc7a2");const q={class:"p-4 analysis"},J={ref:"tenVisitRef",style:{height:"280px",width:"100%"}},K={ref:"browserRef",style:{height:"280px",width:"100%"}},Q={ref:"operatingSystemRef",style:{height:"280px",width:"100%"}};U();const Z=a((o,h,C,F,A,D)=>{const l=_("GrowCard"),d=_("a-col"),c=_("a-row"),p=_("CollapseContainer");return b(),E("div",q,[t(c,{class:"pl-2"},{default:a(()=>[(b(!0),E(W,null,M(o.formState.growCardList,m=>(b(),E(d,{key:m.title,sm:24,md:12,lg:6},{default:a(()=>[t(l,{info:m},null,8,["info"])]),_:2},1024))),128))]),_:1}),t(c,{class:"pl-2"},{default:a(()=>[t(d,{md:24,lg:24,class:"my-3"},{default:a(()=>[t(p,{class:"mr-3",title:"\u8FD1\u5341\u5929\u8BBF\u95EE\u8BB0\u5F55",canExpan:!1},{default:a(()=>[t("div",J,null,512)]),_:1}),t(c,{class:"mt-3"},{default:a(()=>[t(d,{md:24,lg:12,class:"product-total"},{default:a(()=>[t(p,{class:"mr-3",title:"\u8BBF\u95EE\u7528\u6237\u6D4F\u89C8\u5668",canExpan:!1},{default:a(()=>[t("div",K,null,512)]),_:1})]),_:1}),t(d,{md:24,lg:12},{default:a(()=>[t(p,{class:"mr-3",title:"\u8BBF\u95EE\u7528\u6237\u64CD\u4F5C\u7CFB\u7EDF",canExpan:!1},{default:a(()=>[t("div",Q,null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])});S.render=Z,S.__scopeId="data-v-6b4fc7a2";export default S;
