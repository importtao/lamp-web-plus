var t=Object.assign;import{_ as E,a as O}from"./useDrawer.c824a5fb.js";import{_ as P}from"./BasicForm.2f71c419.js";import{u as B}from"./useForm.f47588eb.js";import{cu as r,be as m,j as T,d as x,w as U,D as v,F as $,r as D,o as j,n as V,J as k,p as q,s as H}from"./index.05ea33df.js";import{S as n,A as f}from"./commonEnum.da040d67.js";import{g as C}from"./formValidateService.342f23c9.js";const l={Page:{url:n.AUTHORITY+"/area/page",method:r.POST},Save:{url:n.AUTHORITY+"/area",method:r.POST},Update:{url:n.AUTHORITY+"/area",method:r.PUT},Delete:{url:n.AUTHORITY+"/area",method:r.DELETE},Query:{url:n.AUTHORITY+"/area/query",method:r.POST}},N=a=>m.request(t(t({},l.Page),{params:a})),Y=a=>m.request(t(t({},l.Save),{params:a})),L=a=>m.request(t(t({},l.Update),{params:a})),M=a=>m.request(t(t({},l.Delete),{params:a})),{t:e}=T(),G=[{title:e("lamp.system.area.code"),dataIndex:"code"},{title:e("lamp.system.area.label"),dataIndex:"label"},{title:e("lamp.system.area.fullName"),dataIndex:"fullName"},{title:e("lamp.system.area.sortValue"),dataIndex:"sortValue"},{title:e("lamp.system.area.longitude"),dataIndex:"longitude"},{title:e("lamp.system.area.latitude"),dataIndex:"latitude"},{title:e("lamp.system.area.level"),dataIndex:"level"},{title:e("lamp.system.area.source"),dataIndex:"source"},{title:e("lamp.system.area.state"),dataIndex:"state"},{title:e("lamp.system.area.parentId"),dataIndex:"parentId"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],z=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],J=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.area.code"),field:"code",component:"Input"},{label:e("lamp.system.area.label"),field:"label",component:"Input"},{label:e("lamp.system.area.fullName"),field:"fullName",component:"Input"},{label:e("lamp.system.area.sortValue"),field:"sortValue",component:"Input"},{label:e("lamp.system.area.longitude"),field:"longitude",component:"Input"},{label:e("lamp.system.area.latitude"),field:"latitude",component:"Input"},{label:e("lamp.system.area.level"),field:"level",component:"Input"},{label:e("lamp.system.area.source"),field:"source",component:"Input"},{label:e("lamp.system.area.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.system.area.parentId"),field:"parentId",component:"Input"}],Q=a=>[];var I=x({name:"AreaEdit",components:{BasicDrawer:E,BasicForm:P},emits:["success","register"],setup(a,{emit:y}){const{t:i}=T(),o=U(f.ADD),{createMessage:g}=$(),[b,{setFieldsValue:c,resetFields:p,updateSchema:S,validate:_}]=B({labelWidth:100,schemas:J,showActionButtonGroup:!1,actionColOptions:{span:23}}),[F,{setDrawerProps:u,closeDrawer:R}]=O(async s=>{await p(),u({confirmLoading:!1}),o.value=s==null?void 0:s.type;let h=l.Save;const w=t({},s==null?void 0:s.record);v(o)===f.EDIT?h=l.Update:w.id=void 0,await c(t({},w)),C(h,Q()).then(async d=>{d&&d.length>0&&await S(d)})});async function A(){try{const s=await _();u({confirmLoading:!0}),v(o)===f.EDIT?await L(s):await Y(s),g.success(i(`common.tips.${o.value}Success`)),R(),y("success")}finally{u({confirmLoading:!1})}}return{t:i,registerDrawer:F,registerForm:b,type:o,handleSubmit:A}}});function W(a,y,i,o,g,b){const c=D("BasicForm"),p=D("BasicDrawer");return j(),V(p,H(a.$attrs,{onRegister:a.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:a.t(`common.title.${a.type}`),onOk:a.handleSubmit}),{default:k(()=>[q(c,{onRegister:a.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}I.render=W;var K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:I});export{K as E,I as _,G as c,N as p,M as r,z as s};
