import{cN as Ae,cO as Ue,p as s,s as ee,I as te,w as m,y as re,_ as v,x as se,cA as ge,at as we,Z as j,a4 as Ve,a0 as he,d as W,M as Pe,cP as De,S as d,ac as Te,k as g,Y as Z,bb as $e,ae as E,cG as ne,ai as Ze,bq as Ee,b0 as He,cQ as _e,Q as Ye,a6 as Be,a3 as Fe,ad as Xe}from"./index.b7a14d4f.js";import{a as We,g as Ce}from"./css.b1edd3c8.js";var qe="[object Number]";function Qe(r){return typeof r=="number"||Ae(r)&&Ue(r)==qe}var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function Ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.forEach(function(n){et(r,n,t[n])})}return r}function et(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ce=function(e,t){var a=Ke({},e,t.attrs);return s(te,ee(a,{icon:Je}),null)};ce.displayName="RotateLeftOutlined",ce.inheritAttrs=!1;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function rt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.forEach(function(n){nt(r,n,t[n])})}return r}function nt(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ve=function(e,t){var a=rt({},e,t.attrs);return s(te,ee(a,{icon:tt}),null)};ve.displayName="RotateRightOutlined",ve.inheritAttrs=!1;var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function it(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.forEach(function(n){ot(r,n,t[n])})}return r}function ot(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var fe=function(e,t){var a=it({},e,t.attrs);return s(te,ee(a,{icon:at}),null)};fe.displayName="ZoomInOutlined",fe.inheritAttrs=!1;var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function ut(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.forEach(function(n){st(r,n,t[n])})}return r}function st(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var pe=function(e,t){var a=ut({},e,t.attrs);return s(te,ee(a,{icon:lt}),null)};pe.displayName="ZoomOutOutlined",pe.inheritAttrs=!1;function ct(r){var e=m(null),t=re(v({},r)),a=m([]),n=function(c){e.value===null&&(a.value=[],e.value=ge(function(){var w;a.value.forEach(function(O){w=v(v({},w),O)}),we(t,w),e.value=null})),a.value.push(c)};return se(function(){e.value&&ge.cancel(e.value)}),[t,n]}function be(r,e,t,a){var n=e+t,i=(t-a)/2;if(t>a){if(e>0)return j({},r,i);if(e<0&&n<a)return j({},r,-i)}else if(e<0||n>a)return j({},r,e<0?i:-i);return{}}function vt(r,e,t,a){var n=We(),i=n.width,c=n.height,w=null;return r<=i&&e<=c?w={x:0,y:0}:(r>i||e>c)&&(w=v(v({},be("x",t,r,i)),be("y",a,e,c))),w}var Oe=Symbol("previewGroupContext"),de={provide:function(e){Ve(Oe,e)},inject:function(){return he(Oe,{isPreviewGroup:m(!1),previewUrls:re({}),setPreviewUrls:function(){},current:m(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null})}},xe=W({name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,t){var a=t.slots,n=re({}),i=m(),c=m(!1),w=m(null),O=function(u){we(n,u)},C=function(u){i.value=u},P=function(u){w.value=u},D=function(u){c.value=u},I=function(u,x){return n[u]=x,function(){delete n[u]}},b=function(u){u==null||u.stopPropagation(),c.value=!1,w.value=null};return de.provide({isPreviewGroup:m(!0),previewUrls:n,setPreviewUrls:O,current:i,setCurrent:C,setShowPreview:D,setMousePosition:P,registerImage:I}),function(){return s(Pe,null,[a.default&&a.default(),s(ye,{"ria-hidden":!c.value,visible:c.value,prefixCls:e.previewPrefixCls,onClose:b,mousePosition:w.value,src:n[i.value]},null)])}}}),ft=De(),ae={x:0,y:0},pt=v({src:d.string,alt:d.string},ft),ye=W({name:"Preview",inheritAttrs:!1,props:pt,emits:["close","afterClose"],setup:function(e,t){var a=t.emit,n=t.attrs,i=m(1),c=m(0),w=ct(ae),O=Te(w,2),C=O[0],P=O[1],D=function(){return a("close")},I=m(),b=re({originX:0,originY:0,deltaX:0,deltaY:0}),f=m(!1),u=de.inject(),x=u.previewUrls,L=u.current,R=u.isPreviewGroup,k=u.setCurrent,H=g(function(){return Object.keys(x).length}),_=g(function(){return Object.keys(x)}),z=g(function(){return _.value.indexOf(String(L.value))}),ie=g(function(){return R.value?x[L.value]:e.src}),Y=g(function(){return R.value&&H.value>1}),T=function(){i.value=1,c.value=0,P(ae)},q=function(){i.value++,P(ae)},oe=function(){i.value>1&&i.value--,P(ae)},le=function(){c.value+=90},ue=function(){c.value-=90},A=function(l){l.preventDefault(),l.stopPropagation(),z.value>0&&k(_.value[String(z.value-1)])},B=function(l){l.preventDefault(),l.stopPropagation(),z.value<H.value-1&&k(_.value[String(z.value+1)])},Q=Z(j({},"".concat(e.prefixCls,"-moving"),f.value)),p="".concat(e.prefixCls,"-operations-operation"),h="".concat(e.prefixCls,"-operations-icon"),y=[{icon:$e,onClick:D,type:"close"},{icon:fe,onClick:q,type:"zoomIn"},{icon:pe,onClick:oe,type:"zoomOut",disabled:g(function(){return i.value===1})},{icon:ve,onClick:le,type:"rotateRight"},{icon:ce,onClick:ue,type:"rotateLeft"}],G=function(){if(e.visible&&f.value){var l=I.value.offsetWidth*i.value,S=I.value.offsetHeight*i.value,N=Ce(I.value),U=N.left,M=N.top,J=c.value%180!=0;f.value=!1;var K=vt(J?S:l,J?l:S,U,M);K&&P(v({},K))}},$=function(l){l.preventDefault(),l.stopPropagation(),b.deltaX=l.pageX-C.x,b.deltaY=l.pageY-C.y,b.originX=C.x,b.originY=C.y,f.value=!0},F=function(l){e.visible&&f.value&&P({x:l.pageX-b.deltaX,y:l.pageY-b.deltaY})},X=function(){};return se(function(){E([function(){return e.visible},f],function(){X();var o,l,S=ne(window,"mouseup",G,!1),N=ne(window,"mousemove",F,!1);try{window.top!==window.self&&(o=ne(window.top,"mouseup",G,!1),l=ne(window.top,"mousemove",F,!1))}catch(U){}X=function(){S.remove(),N.remove(),o&&o.remove(),l&&l.remove()}},{flush:"post",immediate:!0})}),Ze(function(){X()}),function(){return s(_e,v(v({},n),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:e.prefixCls,onClose:D,afterClose:T,visible:e.visible,wrapClassName:Q,getContainer:e.getContainer}),{default:function(){return[s("ul",{class:"".concat(e.prefixCls,"-operations")},[y.map(function(l){var S=l.icon,N=l.onClick,U=l.type,M=l.disabled;return s("li",{class:Z(p,j({},"".concat(e.prefixCls,"-operations-operation-disabled"),M&&(M==null?void 0:M.value))),onClick:N,key:U},[s(S,{class:h},null)])})]),s("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(C.x,"px, ").concat(C.y,"px, 0)")}},[s("img",{onMousedown:$,ref:I,class:"".concat(e.prefixCls,"-img"),src:ie.value,alt:e.alt,style:{transform:"scale3d(".concat(i.value,", ").concat(i.value,", 1) rotate(").concat(c.value,"deg)")}},null)]),Y.value&&s("div",{class:Z("".concat(e.prefixCls,"-switch-left"),j({},"".concat(e.prefixCls,"-switch-left-disabled"),z.value<=0)),onClick:A},[s(Ee,null,null)]),Y.value&&s("div",{class:Z("".concat(e.prefixCls,"-switch-right"),j({},"".concat(e.prefixCls,"-switch-right-disabled"),z.value>=H.value-1)),onClick:B},[s(He,null,null)])]}})}}}),Se={src:d.string,wrapperClassName:d.string,wrapperStyle:d.style,prefixCls:d.string,previewPrefixCls:d.string,placeholder:d.VNodeChild,fallback:d.string,preview:d.oneOfType([d.looseBool,d.shape({visible:d.bool,onVisibleChange:d.func,getContainer:d.oneOfType([d.func,d.looseBool,d.string])}).loose]).def(!0)},dt=function(e,t){var a=v({},e);return Object.keys(t).forEach(function(n){e[n]===void 0&&(a[n]=t[n])}),a},mt=0,Me=W({name:"Image",mixins:[Ye],inheritAttrs:!1,props:Se,emits:["click"],setup:function(e,t){var a=t.attrs,n=t.slots,i=t.emit,c=g(function(){return e.prefixCls}),w=g(function(){return"".concat(c.value,"-preview")}),O=g(function(){var p={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return Be(e.preview)==="object"?dt(e.preview,p):p}),C=g(function(){return e.placeholder&&e.placeholder!==!0||n.placeholder}),P=g(function(){return O.value.visible}),D=g(function(){return O.value.onVisibleChange}),I=g(function(){return O.value.getContainer}),b=g(function(){return P.value!==void 0}),f=m(!!P.value);E(P,function(){f.value=!!P.value}),E(f,function(p,h){D.value(p,h)});var u=m(C.value?"loading":"normal");E(function(){return e.src},function(){u.value=C.value?"loading":"normal"});var x=m(null),L=g(function(){return u.value==="error"}),R=de.inject(),k=R.isPreviewGroup,H=R.setCurrent,_=R.setShowPreview,z=R.setMousePosition,ie=R.registerImage,Y=m(mt++),T=g(function(){return e.preview&&!L.value}),q=function(){u.value="normal"},oe=function(){u.value="error"},le=function(h){if(!b.value){var y=Ce(h.target),G=y.left,$=y.top;k.value?(H(Y.value),z({x:G,y:$})):x.value={x:G,y:$}}k.value?_(!0):f.value=!0,i("click",h)},ue=function(){f.value=!1,b.value||(x.value=null)},A=m(null);E(function(){return A},function(){u.value==="loading"&&A.value.complete&&(A.value.naturalWidth||A.value.naturalHeight)&&q()});var B=function(){};se(function(){E([function(){return e.src},T],function(){if(B(),!k.value)return function(){};B=ie(Y.value,e.src),T.value||B()},{flush:"post",immediate:!0})});var Q=function(h){return Qe(h)?h+"px":h};return function(){var p=e.prefixCls,h=e.wrapperClassName,y=e.fallback,G=e.src,$=e.preview,F=e.placeholder,X=e.wrapperStyle,o=a,l=o.width,S=o.height,N=o.crossorigin,U=o.decoding,M=o.alt,J=o.sizes,K=o.srcset,Ie=o.usemap,Le=o.class,Re=o.style,ze=Z(p,h,j({},"".concat(p,"-error"),L.value)),Ge=L.value&&y?y:G,me=n.previewMask&&n.previewMask(),Ne={crossorigin:N,decoding:U,alt:M,sizes:J,srcset:K,usemap:Ie,class:Z("".concat(p,"-img"),j({},"".concat(p,"-img-placeholder"),F===!0),Le),style:v({height:S},Re)};return s(Pe,null,[s("div",{class:ze,onClick:$&&!L.value?le:function(ke){i("click",ke)},style:v({width:Q(l),height:Q(S)},X)},[s("img",v(v(v({},Ne),L.value&&y?{src:y}:{onLoad:q,onError:oe,src:G}),{},{ref:A}),null),u.value==="loading"&&s("div",{"aria-hidden":"true",class:"".concat(p,"-placeholder")},[F||n.placeholder&&n.placeholder()]),me&&T.value&&s("div",{class:"".concat(p,"-mask")},[me])]),!k.value&&T.value&&s(ye,{"aria-hidden":!f.value,visible:f.value,prefixCls:w.value,onClose:ue,mousePosition:x.value,src:Ge,alt:M,getContainer:I.value},null)])}}});Me.PreviewGroup=xe;var je=W({name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:d.string},setup:function(e,t){var a=t.attrs,n=t.slots,i=he("configProvider",Fe),c=g(function(){return i.getPrefixCls("image-preview",e.previewPrefixCls)});return function(){return s(xe,v(v({},v(v({},a),e)),{},{previewPrefixCls:c.value}),n)}}}),V=W({name:"AImage",inheritAttrs:!1,props:Se,setup:function(e,t){var a=t.slots,n=t.attrs,i=Xe("image",e),c=i.prefixCls;return function(){return s(Me,v(v(v({},n),e),{},{prefixCls:c.value}),a)}}});V.PreviewGroup=je,V.install=function(r){return r.component(V.name,V),r.component(V.PreviewGroup.name,V.PreviewGroup),r};export{V as I,je as a};
