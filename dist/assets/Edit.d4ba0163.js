var a=Object.assign;import{_ as B,a as E}from"./useDrawer.c824a5fb.js";import{_ as O}from"./BasicForm.2f71c419.js";import{u as x}from"./useForm.f47588eb.js";import{cu as i,be as r,j as S,d as A,w as C,D as T,F as U,r as v,o as $,n as j,J as V,p as k,s as q}from"./index.05ea33df.js";import{S as l,A as y}from"./commonEnum.da040d67.js";import{g as H}from"./formValidateService.342f23c9.js";const n={Page:{url:l.AUTHORITY+"/dictionary/page",method:i.POST},Save:{url:l.AUTHORITY+"/dictionary",method:i.POST},Update:{url:l.AUTHORITY+"/dictionary",method:i.PUT},Delete:{url:l.AUTHORITY+"/dictionary",method:i.DELETE},Query:{url:l.AUTHORITY+"/dictionary/query",method:i.POST}},Y=t=>r.request(a(a({},n.Page),{params:t})),L=t=>r.request(a(a({},n.Save),{params:t})),G=t=>r.request(a(a({},n.Update),{params:t})),M=t=>r.request(a(a({},n.Delete),{params:t})),{t:e}=S(),z=[{title:e("lamp.system.dictionary.type"),dataIndex:"type"},{title:e("lamp.system.dictionary.label"),dataIndex:"label"},{title:e("lamp.system.dictionary.code"),dataIndex:"code"},{title:e("lamp.system.dictionary.name"),dataIndex:"name"},{title:e("lamp.system.dictionary.state"),dataIndex:"state"},{title:e("lamp.system.dictionary.describe"),dataIndex:"describe"},{title:e("lamp.system.dictionary.sortValue"),dataIndex:"sortValue"},{title:e("lamp.system.dictionary.icon"),dataIndex:"icon"},{title:e("lamp.system.dictionary.cssStyle"),dataIndex:"cssStyle"},{title:e("lamp.system.dictionary.cssClass"),dataIndex:"cssClass"},{title:e("lamp.system.dictionary.readonly"),dataIndex:"readonly"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],J=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],N=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.dictionary.type"),field:"type",component:"Input"},{label:e("lamp.system.dictionary.label"),field:"label",component:"Input"},{label:e("lamp.system.dictionary.code"),field:"code",component:"Input"},{label:e("lamp.system.dictionary.name"),field:"name",component:"Input"},{label:e("lamp.system.dictionary.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.system.dictionary.describe"),field:"describe",component:"Input"},{label:e("lamp.system.dictionary.sortValue"),field:"sortValue",component:"Input"},{label:e("lamp.system.dictionary.icon"),field:"icon",component:"Input"},{label:e("lamp.system.dictionary.cssStyle"),field:"cssStyle",component:"Input"},{label:e("lamp.system.dictionary.cssClass"),field:"cssClass",component:"Input"},{label:e("lamp.system.dictionary.readonly"),field:"readonly",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],Q=t=>[];var f=A({name:"DictionaryEdit",components:{BasicDrawer:B,BasicForm:O},emits:["success","register"],setup(t,{emit:b}){const{t:c}=S(),o=C(y.ADD),{createMessage:I}=U(),[g,{setFieldsValue:m,resetFields:d,updateSchema:D,validate:_}]=x({labelWidth:100,schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[R,{setDrawerProps:p,closeDrawer:F}]=E(async s=>{await d(),p({confirmLoading:!1}),o.value=s==null?void 0:s.type;let h=n.Save;const w=a({},s==null?void 0:s.record);T(o)===y.EDIT?h=n.Update:w.id=void 0,await m(a({},w)),H(h,Q()).then(async u=>{u&&u.length>0&&await D(u)})});async function P(){try{const s=await _();p({confirmLoading:!0}),T(o)===y.EDIT?await G(s):await L(s),I.success(c(`common.tips.${o.value}Success`)),F(),b("success")}finally{p({confirmLoading:!1})}}return{t:c,registerDrawer:R,registerForm:g,type:o,handleSubmit:P}}});function W(t,b,c,o,I,g){const m=v("BasicForm"),d=v("BasicDrawer");return $(),j(d,q(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:V(()=>[k(m,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=W;var K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{K as E,f as _,z as c,Y as p,M as r,J as s};
