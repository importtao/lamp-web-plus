var l=Object.assign;import{_ as F,a as R}from"./useDrawer.3628b9ed.js";import{_ as B}from"./BasicForm.ba267815.js";import{u as S}from"./useForm.93cfb83b.js";import{j as y,h as j,d as $,w as q,D as w,F as Y,r as k,o as x,n as A,J as E,p as M,s as P}from"./index.b6dfbfcf.js";import{A as c}from"./commonEnum.da040d67.js";import{A as T,u as C,s as N}from"./buyTaskItem.14a55e70.js";import{g as V}from"./formValidateService.c9ec958e.js";const{t:e}=y(),O=[{title:e("lamp.materials.buyTaskItem.warehouseInventoryRecordId"),dataIndex:"warehouseInventoryRecordId"},{title:e("lamp.materials.buyTaskItem.warehouseId"),dataIndex:"warehouseId"},{title:e("lamp.materials.buyTaskItem.status"),dataIndex:"status"},{title:e("lamp.materials.buyTaskItem.materialsId"),dataIndex:"materialsId"},{title:e("lamp.materials.buyTaskItem.skuId"),dataIndex:"skuId"},{title:e("lamp.materials.buyTaskItem.requireTime"),dataIndex:"requireTime"},{title:e("lamp.materials.buyTaskItem.quantity"),dataIndex:"quantity"},{title:e("lamp.materials.buyTaskItem.optionName"),dataIndex:"optionName"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],L=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],H=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.buyTaskItem.warehouseInventoryRecordId"),field:"warehouseInventoryRecordId",component:"Input"},{label:e("lamp.materials.buyTaskItem.warehouseId"),field:"warehouseId",component:"Input"},{label:e("lamp.materials.buyTaskItem.status"),field:"status",component:"Input"},{label:e("lamp.materials.buyTaskItem.materialsId"),field:"materialsId",component:"Input"},{label:e("lamp.materials.buyTaskItem.skuId"),field:"skuId",component:"Input"},{label:e("lamp.materials.buyTaskItem.requireTime"),field:"requireTime",component:"DatePicker",componentProps:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",showTime:{defaultValue:j("00:00:00","HH:mm:ss")}}},{label:e("lamp.materials.buyTaskItem.quantity"),field:"quantity",component:"Input"},{label:e("lamp.materials.buyTaskItem.optionName"),field:"optionName",component:"Input"}],z=t=>[];var u=$({name:"BuyTaskItemEdit",components:{BasicDrawer:F,BasicForm:B},emits:["success","register"],setup(t,{emit:p}){const{t:o}=y(),s=q(c.ADD),{createMessage:d}=Y(),[I,{setFieldsValue:r,resetFields:m,updateSchema:h,validate:g}]=S({labelWidth:100,schemas:H,showActionButtonGroup:!1,actionColOptions:{span:23}}),[D,{setDrawerProps:n,closeDrawer:_}]=R(async a=>{await m(),n({confirmLoading:!1}),s.value=a==null?void 0:a.type;let f=T.Save;const b=l({},a==null?void 0:a.record);w(s)===c.EDIT?f=T.Update:b.id=void 0,await r(l({},b)),V(f,z()).then(async i=>{i&&i.length>0&&await h(i)})});async function v(){try{const a=await g();n({confirmLoading:!0}),w(s)===c.EDIT?await C(a):await N(a),d.success(o(`common.tips.${s.value}Success`)),_(),p("success")}finally{n({confirmLoading:!1})}}return{t:o,registerDrawer:D,registerForm:I,type:s,handleSubmit:v}}});function G(t,p,o,s,d,I){const r=k("BasicForm"),m=k("BasicDrawer");return x(),A(m,P(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:E(()=>[M(r,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}u.render=G;var J=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:u});export{J as E,u as _,O as c,L as s};
