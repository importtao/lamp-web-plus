import{aC as n,d as T,y as $,x as h,k,ae as q,D as p,c4 as _,b5 as v,o as w,n as C,q as N}from"./index.05ea33df.js";import"./vendor.352e3120.js";const j={startVal:n.number.def(0),endVal:n.number.def(2020),duration:n.number.def(1300),autoplay:n.bool.def(!0),decimals:{type:Number,required:!1,default:0,validator(t){return t>=0}},decimal:n.string.def("."),separator:n.string.def(","),prefix:n.string.def(""),suffix:n.string.def(""),useEasing:n.bool.def(!0),easingFn:{type:Function,default(t,s,a,i){return a*(-Math.pow(2,-10*t/i)+1)*1024/1023+s}}};var b=T({name:"CountTo",props:j,emits:["mounted","callback"],setup(t,{emit:s}){const a=$({localStartVal:t.startVal,displayValue:V(t.startVal),printVal:null,paused:!1,localDuration:t.duration,startTime:null,timestamp:null,remaining:null,rAF:null});h(()=>{t.autoplay&&u(),s("mounted")});const i=k(()=>t.startVal>t.endVal);q([()=>t.startVal,()=>t.endVal],()=>{t.autoplay&&u()});function u(){const{startVal:l,duration:o}=t;a.localStartVal=l,a.startTime=null,a.localDuration=o,a.paused=!1,a.rAF=requestAnimationFrame(c)}function g(){a.paused?(y(),a.paused=!1):(x(),a.paused=!0)}function x(){cancelAnimationFrame(a.rAF)}function y(){a.startTime=null,a.localDuration=+a.remaining,a.localStartVal=+a.printVal,requestAnimationFrame(c)}function D(){a.startTime=null,cancelAnimationFrame(a.rAF),a.displayValue=V(t.startVal)}function c(l){const{useEasing:o,easingFn:d,endVal:e}=t;a.startTime||(a.startTime=l),a.timestamp=l;const r=l-a.startTime;a.remaining=a.localDuration-r,o?p(i)?a.printVal=a.localStartVal-d(r,0,a.localStartVal-e,a.localDuration):a.printVal=d(r,a.localStartVal,e-a.localStartVal,a.localDuration):p(i)?a.printVal=a.localStartVal-(a.localStartVal-e)*(r/a.localDuration):a.printVal=a.localStartVal+(e-a.localStartVal)*(r/a.localDuration),p(i)?a.printVal=a.printVal<e?e:a.printVal:a.printVal=a.printVal>e?e:a.printVal,a.displayValue=V(a.printVal),r<a.localDuration?a.rAF=requestAnimationFrame(c):s("callback")}function V(l){const{decimals:o,decimal:d,separator:e,suffix:r,prefix:S}=t;l=Number(l).toFixed(o),l+="";const m=l.split(".");let f=m[0];const A=m.length>1?d+m[1]:"",F=/(\d+)(\d{3})/;if(e&&!_(e))for(;F.test(f);)f=f.replace(F,"$1"+e+"$2");return S+f+A+r}return{count:c,reset:D,resume:y,start:u,pauseResume:g,displayValue:v(a,"displayValue")}}});function B(t,s,a,i,u,g){return w(),C("span",null,N(t.displayValue),1)}b.render=B;export default b;
