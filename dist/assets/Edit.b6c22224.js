var m=Object.assign;import{_ as k,a as T}from"./useDrawer.1dca4d34.js";import{_ as B}from"./BasicForm.8a90524a.js";import{u as S}from"./useForm.1103fde3.js";import{j as h,h as j,d as $,w as q,D as v,F as Y,r as y,o as x,n as A,J as E,p as M,s as P}from"./index.b7a14d4f.js";import{A as c}from"./commonEnum.da040d67.js";import{A as R,u as C,s as N}from"./warehouseInventoryRecord.f54fd6b6.js";import{g as V}from"./formValidateService.993b7545.js";const{t:e}=h(),O=[{title:e("lamp.materials.warehouseInventoryRecord.orderId"),dataIndex:"orderId"},{title:e("lamp.materials.warehouseInventoryRecord.warehouseId"),dataIndex:"warehouseId"},{title:e("lamp.materials.warehouseInventoryRecord.isInFlag"),dataIndex:"isInFlag"},{title:e("lamp.materials.warehouseInventoryRecord.status"),dataIndex:"status"},{title:e("lamp.materials.warehouseInventoryRecord.skuId"),dataIndex:"skuId"},{title:e("lamp.materials.warehouseInventoryRecord.quantity"),dataIndex:"quantity"},{title:e("lamp.materials.warehouseInventoryRecord.requireTime"),dataIndex:"requireTime"},{title:e("lamp.materials.warehouseInventoryRecord.optionName"),dataIndex:"optionName"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],L=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],G=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.warehouseInventoryRecord.orderId"),field:"orderId",component:"Input"},{label:e("lamp.materials.warehouseInventoryRecord.warehouseId"),field:"warehouseId",component:"Input"},{label:e("lamp.materials.warehouseInventoryRecord.isInFlag"),field:"isInFlag",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.materials.warehouseInventoryRecord.status"),field:"status",component:"Input"},{label:e("lamp.materials.warehouseInventoryRecord.skuId"),field:"skuId",component:"Input"},{label:e("lamp.materials.warehouseInventoryRecord.quantity"),field:"quantity",component:"Input"},{label:e("lamp.materials.warehouseInventoryRecord.requireTime"),field:"requireTime",component:"DatePicker",componentProps:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",showTime:{defaultValue:j("00:00:00","HH:mm:ss")}}},{label:e("lamp.materials.warehouseInventoryRecord.optionName"),field:"optionName",component:"Input"}],H=o=>[];var d=$({name:"WarehouseInventoryRecordEdit",components:{BasicDrawer:k,BasicForm:B},emits:["success","register"],setup(o,{emit:u}){const{t:r}=h(),t=q(c.ADD),{createMessage:p}=Y(),[I,{setFieldsValue:s,resetFields:n,updateSchema:g,validate:b}]=S({labelWidth:100,schemas:G,showActionButtonGroup:!1,actionColOptions:{span:23}}),[D,{setDrawerProps:i,closeDrawer:F}]=T(async a=>{await n(),i({confirmLoading:!1}),t.value=a==null?void 0:a.type;let f=R.Save;const w=m({},a==null?void 0:a.record);v(t)===c.EDIT?f=R.Update:w.id=void 0,await s(m({},w)),V(f,H()).then(async l=>{l&&l.length>0&&await g(l)})});async function _(){try{const a=await b();i({confirmLoading:!0}),v(t)===c.EDIT?await C(a):await N(a),p.success(r(`common.tips.${t.value}Success`)),F(),u("success")}finally{i({confirmLoading:!1})}}return{t:r,registerDrawer:D,registerForm:I,type:t,handleSubmit:_}}});function W(o,u,r,t,p,I){const s=y("BasicForm"),n=y("BasicDrawer");return x(),A(n,P(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:o.t(`common.title.${o.type}`),onOk:o.handleSubmit}),{default:E(()=>[M(s,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}d.render=W;var z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:d});export{z as E,d as _,O as c,L as s};
