var m=Object.assign;import{_ as v,a as x}from"./useDrawer.3cc723e3.js";import{_ as B}from"./BasicForm.13ecb12b.js";import{u as S}from"./useForm.ac288eb4.js";import{d as A,j as O,w as I,D as f,F as $,r as b,o as k,n as C,J as L,p as R,s as E}from"./index.b361f078.js";import{A as c}from"./commonEnum.da040d67.js";import{A as g,u as U,s as V}from"./categoryLackApply.7957c668.js";import{g as M}from"./formValidateService.703a8ce6.js";import{e as P,c as z}from"./categoryLackApply.data.0f996f7b.js";import"./ArrowLeftOutlined.9183eb3a.js";import"./index.c407339a.js";import"./useFormItem.17a96bc3.js";import"./index.325fce14.js";import"./index.ee85ced9.js";import"./get.cbc20f33.js";import"./conductUtil.7ef77030.js";import"./iconUtil.e9686cd8.js";import"./_baseSet.60a402c1.js";import"./hasIn.661f69c5.js";import"./FileOutlined.a4627299.js";import"./user.449909fc.js";import"./transButton.7b09546d.js";import"./DeleteOutlined.eab5616f.js";import"./useModal.7bdad3e3.js";import"./useWindowSizeFn.d25090e5.js";import"./FullscreenOutlined.86c5b021.js";import"./index.8d41a8b1.js";import"./index.fe2e064e.js";import"./css.b1edd3c8.js";import"./index.fa7b5b48.js";import"./index.781b32b3.js";import"./uuid.2b29000c.js";import"./index.1c4eb95d.js";import"./uniqBy.22bab247.js";import"./_baseIteratee.700ae08f.js";import"./_baseProperty.74f89655.js";import"./findIndex.fe35620d.js";import"./toInteger.f515429e.js";import"./index.c25573d6.js";import"./download.8a0fd70b.js";import"./index.e7aa41c1.js";import"./index.80320b3c.js";import"./UpOutlined.cbb592c6.js";import"./index.08bfe127.js";import"./vendor.352e3120.js";import"./RedoOutlined.2709deaa.js";import"./dayjs.c73a8766.js";import"./useState.1cc54c32.js";import"./index.57e65500.js";import"./Col.4346c2f2.js";import"./responsiveObserve.16e475dd.js";import"./canUseDom.0bf35682.js";import"./useSize.5dcbe36a.js";import"./index.6cab1e04.js";var w=A({name:"CategoryLackApplyEdit",components:{BasicDrawer:v,BasicForm:B},emits:["success","register"],setup(s,{emit:p}){const{t}=O(),o=I(c.ADD),{createMessage:d}=$(),[j,{setFieldsValue:r,resetFields:i,updateSchema:F,validate:y}]=S({labelWidth:100,schemas:P,showActionButtonGroup:!1,actionColOptions:{span:23}}),[D,{setDrawerProps:a,closeDrawer:h}]=x(async e=>{await i(),a({confirmLoading:!1}),o.value=e==null?void 0:e.type;let l=g.Save;const u=m({},e==null?void 0:e.record);f(o)===c.EDIT?l=g.Update:u.id=void 0,await r(m({},u)),M(l,z()).then(async n=>{n&&n.length>0&&await F(n)})});async function _(){try{const e=await y();a({confirmLoading:!0}),f(o)===c.EDIT?await U(e):await V(e),d.success(t(`common.tips.${o.value}Success`)),h(),p("success")}finally{a({confirmLoading:!1})}}return{t,registerDrawer:D,registerForm:j,type:o,handleSubmit:_}}});function T(s,p,t,o,d,j){const r=b("BasicForm"),i=b("BasicDrawer");return k(),C(i,E(s.$attrs,{onRegister:s.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:s.t(`common.title.${s.type}`),onOk:s.handleSubmit}),{default:L(()=>[R(r,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}w.render=T;export default w;
