var a=Object.assign;import{_ as O,a as T}from"./useDrawer.1dca4d34.js";import{_ as B}from"./BasicForm.8a90524a.js";import{u as $}from"./useForm.1103fde3.js";import{cu as r,be as m,j as D,d as j,w as G,D as _,F as k,r as v,o as q,n as A,J as C,p as x,s as L}from"./index.b7a14d4f.js";import{S as i,A as f}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.993b7545.js";const n={Page:{url:i.ORG+"/station/page",method:r.POST},Save:{url:i.ORG+"/station",method:r.POST},Update:{url:i.ORG+"/station",method:r.PUT},Delete:{url:i.ORG+"/station",method:r.DELETE},Query:{url:i.ORG+"/station/query",method:r.POST}},V=e=>m.request(a(a({},n.Page),{params:e})),M=e=>m.request(a(a({},n.Save),{params:e})),z=e=>m.request(a(a({},n.Update),{params:e})),H=e=>m.request(a(a({},n.Delete),{params:e})),{t}=D(),J=[{title:t("lamp.org.station.name"),dataIndex:"name"},{title:t("lamp.org.station.orgId"),dataIndex:"orgId"},{title:t("lamp.org.station.state"),dataIndex:"state"},{title:t("lamp.org.station.describe"),dataIndex:"describe"},{title:t("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{label:t("lamp.org.station.name"),field:"name",component:"Input",colProps:{span:5}},{field:"createTimeRange",label:t("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:t("lamp.org.station.name"),field:"name",component:"Input"},{label:t("lamp.org.station.orgId"),field:"orgId",component:"Input"},{label:t("lamp.org.station.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:t("lamp.common.yes"),value:!0},{label:t("lamp.common.no"),value:!1}]}},{label:t("lamp.org.station.describe"),field:"describe",component:"Input"}],W=e=>[];var g=j({name:"StationEdit",components:{BasicDrawer:O,BasicForm:B},emits:["success","register"],setup(e,{emit:h}){const{t:l}=D(),s=G(f.ADD),{createMessage:b}=k(),[w,{setFieldsValue:c,resetFields:p,updateSchema:F,validate:R}]=$({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[P,{setDrawerProps:d,closeDrawer:y}]=T(async o=>{await p(),d({confirmLoading:!1}),s.value=o==null?void 0:o.type;let I=n.Save;const S=a({},o==null?void 0:o.record);_(s)===f.EDIT?I=n.Update:S.id=void 0,await c(a({},S)),U(I,W()).then(async u=>{u&&u.length>0&&await F(u)})});async function E(){try{const o=await R();d({confirmLoading:!0}),_(s)===f.EDIT?await z(o):await M(o),b.success(l(`common.tips.${s.value}Success`)),y(),h("success")}finally{d({confirmLoading:!1})}}return{t:l,registerDrawer:P,registerForm:w,type:s,handleSubmit:E}}});function K(e,h,l,s,b,w){const c=v("BasicForm"),p=v("BasicDrawer");return q(),A(p,L(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:e.t(`common.title.${e.type}`),onOk:e.handleSubmit}),{default:C(()=>[x(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}g.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:g});export{X as E,g as _,J as c,V as p,H as r,N as s};
