import{w as i,D as d,aA as S,d as f,B as $,j as y,aB as B,r as l,o as m,n as C,J as v,L as I,q as F,s as g,v as _,aC as c,g as z,p as h}from"./index.ff8e7350.js";import{u as A}from"./useFormItem.4d35203f.js";function k(n){const t=i(n),e=i(!1);let o;function u(){o&&window.clearInterval(o)}function r(){e.value=!1,o=null,u()}function s(){d(e)||!!o||(e.value=!0,o=setInterval(()=>{d(t)===1?(r(),t.value=n):t.value-=1},1e3))}function a(){t.value=n,r()}function p(){a(),s()}return S(()=>{a()}),{start:s,reset:a,restart:p,clear:u,stop:r,currentCount:t,isStart:e}}var b=f({name:"CountButton",components:{Button:$},props:{count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(n){const t=i(!1),{currentCount:e,isStart:o,start:u}=k(n.count),{t:r}=y();async function s(){const{beforeStartFunc:a}=n;if(a&&B(a)){t.value=!0;try{await a()&&u()}finally{t.value=!1}}else u()}return{handleStart:s,isStart:o,currentCount:e,loading:t,t:r}}});function D(n,t,e,o,u,r){const s=l("Button");return m(),C(s,g(n.$attrs,{disabled:n.isStart,onClick:n.handleStart,loading:n.loading}),{default:v(()=>[I(F(n.isStart?n.t("component.countdown.sendText",[n.currentCount]):n.t("component.countdown.normalText")),1)]),_:1},16,["disabled","onClick","loading"])}b.render=D;var w=f({name:"CountDownInput",components:{[_.name]:_,CountButton:b},props:{value:c.string,size:c.oneOf(["default","large","small"]),count:c.number.def(60),sendCodeApi:{type:Function,default:null}},setup(n){const{prefixCls:t}=z("countdown-input"),[e]=A(n);return{prefixCls:t,state:e}}}),O=`.vben-countdown-input .ant-input-group-addon {
  padding-right: 0;
  background-color: transparent;
  border: none;
}
.vben-countdown-input .ant-input-group-addon button {
  font-size: 14px;
}`;function T(n,t,e,o,u,r){const s=l("CountButton"),a=l("AInput");return m(),C(a,g(n.$attrs,{class:n.prefixCls,size:n.size}),{addonAfter:v(()=>[h(s,{size:n.size,count:n.count,beforeStartFunc:n.sendCodeApi},null,8,["size","count","beforeStartFunc"])]),_:1},16,["class","size"])}w.render=T;export{w as _};
