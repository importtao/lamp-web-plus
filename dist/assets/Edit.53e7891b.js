var t=Object.assign;import{_ as k,a as B}from"./useDrawer.9766a9b2.js";import{_ as E}from"./BasicForm.7d393d3b.js";import{u as O}from"./useForm.09fdf95d.js";import{cu as m,be as l,j as w,d as A,w as U,D as T,F as $,r as D,o as j,n as q,J as x,p as H,s as C}from"./index.ff8e7350.js";import{S as n,A as f}from"./commonEnum.da040d67.js";import{g as Y}from"./formValidateService.a395f7ea.js";const o={Page:{url:n.AUTHORITY+"/parameter/page",method:m.POST},Save:{url:n.AUTHORITY+"/parameter",method:m.POST},Update:{url:n.AUTHORITY+"/parameter",method:m.PUT},Delete:{url:n.AUTHORITY+"/parameter",method:m.DELETE},Query:{url:n.AUTHORITY+"/parameter/query",method:m.POST}},L=a=>l.request(t(t({},o.Page),{params:a})),V=a=>l.request(t(t({},o.Save),{params:a})),G=a=>l.request(t(t({},o.Update),{params:a})),M=a=>l.request(t(t({},o.Delete),{params:a})),{t:e}=w(),z=[{title:e("lamp.system.parameter.key"),dataIndex:"key"},{title:e("lamp.system.parameter.value"),dataIndex:"value"},{title:e("lamp.system.parameter.name"),dataIndex:"name"},{title:e("lamp.system.parameter.describe"),dataIndex:"describe"},{title:e("lamp.system.parameter.state"),dataIndex:"state"},{title:e("lamp.system.parameter.readonly"),dataIndex:"readonly"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],J=[{label:e("lamp.system.parameter.key"),field:"key",component:"Input",colProps:{span:5}},{label:e("lamp.system.parameter.value"),field:"value",component:"Input",colProps:{span:5}},{label:e("lamp.system.parameter.name"),field:"name",component:"Input",colProps:{span:5}},{label:e("lamp.system.parameter.describe"),field:"describe",component:"Input",colProps:{span:5}},{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],N=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.parameter.key"),field:"key",component:"Input"},{label:e("lamp.system.parameter.value"),field:"value",component:"Input"},{label:e("lamp.system.parameter.name"),field:"name",component:"Input"},{label:e("lamp.system.parameter.describe"),field:"describe",component:"Input"},{label:e("lamp.system.parameter.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.system.parameter.readonly"),field:"readonly",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],Q=a=>[];var y=A({name:"ParameterEdit",components:{BasicDrawer:k,BasicForm:E},emits:["success","register"],setup(a,{emit:b}){const{t:p}=w(),r=U(f.ADD),{createMessage:g}=$(),[I,{setFieldsValue:i,resetFields:c,updateSchema:P,validate:S}]=O({labelWidth:100,schemas:N,showActionButtonGroup:!1,actionColOptions:{span:23}}),[_,{setDrawerProps:u,closeDrawer:R}]=B(async s=>{await c(),u({confirmLoading:!1}),r.value=s==null?void 0:s.type;let v=o.Save;const h=t({},s==null?void 0:s.record);T(r)===f.EDIT?v=o.Update:h.id=void 0,await i(t({},h)),Y(v,Q()).then(async d=>{d&&d.length>0&&await P(d)})});async function F(){try{const s=await S();u({confirmLoading:!0}),T(r)===f.EDIT?await G(s):await V(s),g.success(p(`common.tips.${r.value}Success`)),R(),b("success")}finally{u({confirmLoading:!1})}}return{t:p,registerDrawer:_,registerForm:I,type:r,handleSubmit:F}}});function W(a,b,p,r,g,I){const i=D("BasicForm"),c=D("BasicDrawer");return j(),q(c,C(a.$attrs,{onRegister:a.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:a.t(`common.title.${a.type}`),onOk:a.handleSubmit}),{default:x(()=>[H(i,{onRegister:a.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}y.render=W;var K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:y});export{K as E,y as _,z as c,L as p,M as r,J as s};
