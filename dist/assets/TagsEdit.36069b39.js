import{g as U}from"./skuParent.325bf4c6.js";import{p as a,s as F,I as $,d as N,B as R,aZ as A,v as q,cm as K,cn as G,co as H,cp as J,aC as Z,w as O,x as Q,V as W,bG as X,r as u,o as p,n as m,J as l,M as j,aE as Y,L as h,q as x,cq as ee,N as E}from"./index.0523a5a3.js";import{T as te}from"./index.c13e48f6.js";import{R as ne,C as ae}from"./index.4637d8b2.js";import{T as le}from"./index.c4d8ae58.js";import{P as oe}from"./PlusOutlined.3cbe2bbe.js";import{S as ie}from"./index.587209e3.js";import{S as se}from"./SettingOutlined.eaab6e15.js";import{D as ue}from"./DeleteOutlined.30981501.js";import"./commonEnum.da040d67.js";import"./vendor.352e3120.js";import"./css.b1edd3c8.js";import"./canUseDom.0bf35682.js";import"./useState.43515907.js";import"./conductUtil.fde7132a.js";import"./index.a9b2b45a.js";import"./index.26c5e60b.js";import"./scrollTo.63faf8a4.js";import"./useBreakpoint.a9fc3198.js";import"./responsiveObserve.43c11602.js";import"./Col.102f0df6.js";var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function re(e){for(var o=1;o<arguments.length;o++){var d=arguments[o]!=null?Object(arguments[o]):{},f=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(d).filter(function(k){return Object.getOwnPropertyDescriptor(d,k).enumerable}))),f.forEach(function(k){ce(e,k,d[k])})}return e}function ce(e,o,d){return o in e?Object.defineProperty(e,o,{value:d,enumerable:!0,configurable:!0,writable:!0}):e[o]=d,e}var T=function(o,d){var f=re({},o,d.attrs);return a($,F(f,{icon:de}),null)};T.displayName="EditOutlined",T.inheritAttrs=!1;const pe=[{title:"\u89C4\u683C\u5206\u7EC4",key:"skuName",dataIndex:"skuName",width:240},{title:"\u5927\u56FE\u6A21\u5F0F",key:"largeImageMode",dataIndex:"largeImageMode",width:100},{title:"\u89C4\u683C",key:"tags",dataIndex:"tags"},{title:"\u64CD\u4F5C",key:"option",dataIndex:"option",width:80}];var P=N({name:"TagsEdit",components:{Table:te,Button:R,Row:ne,Col:ae,Tooltip:A,Input:q,Tag:le,PlusOutlined:oe,Switch:ie,DropdownButton:K,Menu:G,MenuItem:H,SettingOutlined:se,EditOutlined:T,DeleteOutlined:ue,Modal:J},props:{materialsId:Z.string},emits:["skuListChange"],setup(e,{emit:o}){const d=O(null),f=O(!1),k=O(null),I=O([]),r=O([]),w=t=>{t&&I.value.push(t)},y=(t,n)=>{const c=n.itemSaveDTOList.filter(g=>g.name!=t);n.itemSaveDTOList=c};Q(()=>{_()});function C(){return r.value}function _(){U(e.materialsId).then(t=>{t.forEach(n=>{n.inputVisible=!1,n.inputValue="",n.itemSaveDTOList||(n.itemSaveDTOList=[])}),r.value=t})}return{skuList:r,handleClose:y,showInput:(t,n)=>{console.log(n),t.inputVisible=!0,W(()=>{I.value[I.value.length-1].focus()})},handleInputConfirm:t=>{const n=t.inputValue;let c=t.itemSaveDTOList;if(n&&c.filter(g=>g.name===n).length===0){let g={materialsId:e.materialsId,parentId:t.id,name:n,orderIndex:c.length+1};c=[...c,g],Object.assign(t,{itemSaveDTOList:c,inputVisible:!1,inputValue:""}),o("skuListChange",r.value)}else n&&X.error("\u89C4\u683C\uFF1A"+n+"\u91CD\u590D\uFF01");console.log(r.value),Object.assign(t,{inputVisible:!1,inputValue:""})},addSku:()=>{let t=r.value.length+1,n={materialsId:e.materialsId,name:"",keyStr:"s"+t,orderIndex:t,itemSaveDTOList:[],largeImageMode:!1,inputVisible:!1};r.value.push(n),o("skuListChange",r.value)},columns:pe,setItemRef:w,syncSku:_,getData:C,handleButtonClick:t=>{console.log("click left button",t)},handleMenuClick:(t,n,c)=>{t.key&&t.key=="1"?(f.value=!0,d.value=n.name,k.value=n):t.key&&t.key=="2"&&y(n.name,c)},modalText:d,visible:f,currentSkuDataValueItem:k,handleOk:()=>{k.value.name=d.value,f.value=!1}}}});const me=h("\u5220\u9664"),fe=h(" \u4FEE\u6539 "),ke=h(" \u5220\u9664 "),he=h(" \u4FEE\u6539 "),ge=h(" \u5220\u9664 "),ve=h(" \u6DFB\u52A0\u89C4\u683C\u503C "),ye=h(" \u6DFB\u52A0\u89C4\u683C\u5206\u7EC4 ");function Ce(e,o,d,f,k,I){const r=u("Input"),w=u("Switch"),y=u("DeleteOutlined"),C=u("Button"),_=u("EditOutlined"),b=u("MenuItem"),M=u("Menu"),S=u("SettingOutlined"),L=u("DropdownButton"),V=u("Tooltip"),B=u("plus-outlined"),t=u("Table"),n=u("PlusOutlined"),c=u("Row"),g=u("Modal");return p(),m(j,null,[a(t,{columns:e.columns,"data-source":e.skuList,bordered:"",pagination:!1,rowKey:"name"},{bodyCell:l(({column:v,record:i,index:z})=>[v.key==="skuName"?(p(),m(r,{key:0,value:i.name,"onUpdate:value":s=>i.name=s,type:"text",size:"large",style:{width:"198px"}},null,8,["value","onUpdate:value"])):v.key==="largeImageMode"?(p(),m(w,{key:1,checked:i.largeImageMode,"onUpdate:checked":s=>i.largeImageMode=s,"checked-children":"\u5F00","un-checked-children":"\u5173"},null,8,["checked","onUpdate:checked"])):v.key==="option"?(p(),m(C,{key:2,type:"primary",size:e.size,danger:"",onClick:e.de},{icon:l(()=>[a(y)]),default:l(()=>[me]),_:1},8,["size","onClick"])):(p(),m(j,{key:3},[(p(!0),m(j,null,Y(i.itemSaveDTOList,s=>(p(),m(j,null,[s.name.length>15?(p(),m(V,{key:0,title:s.name},{default:l(()=>[a(L,{onClick:e.handleButtonClick,style:{"margin-right":"8px"}},{overlay:l(()=>[a(M,{onClick:D=>e.handleMenuClick(D,s,i)},{default:l(()=>[a(b,{key:"1"},{default:l(()=>[a(_),fe]),_:1}),a(b,{key:"2"},{default:l(()=>[a(y),ke]),_:1})]),_:2},1032,["onClick"])]),icon:l(()=>[a(S)]),default:l(()=>[h(x(`${s.name.slice(0,15)}...`)+" ",1)]),_:2},1032,["onClick"])]),_:2},1032,["title"])):(p(),m(L,{key:1,onClick:e.handleButtonClick,style:{"margin-right":"8px"}},{overlay:l(()=>[a(M,{onClick:D=>e.handleMenuClick(D,s,i)},{default:l(()=>[a(b,{key:"1"},{default:l(()=>[a(_),he]),_:1}),a(b,{key:"2"},{default:l(()=>[a(y),ge]),_:1})]),_:2},1032,["onClick"])]),icon:l(()=>[a(S)]),default:l(()=>[h(x(s.name)+" ",1)]),_:2},1032,["onClick"]))],64))),256)),i&&i.inputVisible?(p(),m(r,{key:0,ref:e.setItemRef,value:i.inputValue,"onUpdate:value":s=>i.inputValue=s,type:"text",size:"large",style:{width:"128px"},onBlur:s=>e.handleInputConfirm(i),onKeyup:ee(s=>e.handleInputConfirm(i),["enter"])},null,8,["value","onUpdate:value","onBlur","onKeyup"])):E("",!0),i&&!i.inputVisible?(p(),m(C,{key:1,danger:"",size:"large",onClick:s=>e.showInput(i,z)},{icon:l(()=>[a(B)]),default:l(()=>[ve]),_:2},1032,["onClick"])):E("",!0)],64))]),_:1},8,["columns","data-source"]),a(c,null,{default:l(()=>[a(C,{type:"dashed",style:{width:"100%","margin-top":"10px"},onClick:e.addSku},{default:l(()=>[a(n),ye]),_:1},8,["onClick"])]),_:1}),a(g,{visible:e.visible,"onUpdate:visible":o[2]||(o[2]=v=>e.visible=v),title:"\u4FEE\u6539\u89C4\u683C\u503C",onOk:e.handleOk},{default:l(()=>[a(r,{value:e.modalText,"onUpdate:value":o[1]||(o[1]=v=>e.modalText=v),size:"large",style:{width:"128px",margin:"auto"}},null,8,["value"])]),_:1},8,["visible","onOk"])],64)}P.render=Ce;export default P;
