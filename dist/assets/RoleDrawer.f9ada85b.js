var b=Object.assign;import{_ as h}from"./BasicForm.13ecb12b.js";import{u as B}from"./useForm.ac288eb4.js";import{da as v,d as I,w as D,k as x,D as F,r as d,o as C,n as T,J as _,p as w,s as k}from"./index.b361f078.js";import{T as y}from"./index.781b32b3.js";import{_ as R,a as j}from"./useDrawer.3cc723e3.js";import{_ as $}from"./index.vue_vue&type=style&index=0&lang.795c93fa.js";import{d as S}from"./system.1a2cdbbe.js";const N=[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",width:200},{title:"\u89D2\u8272\u503C",dataIndex:"roleValue",width:180},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const t=~~e.status==0,s=t?"green":"red",r=t?"\u542F\u7528":"\u505C\u7528";return v(y,{color:s},()=>r)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5907\u6CE8",dataIndex:"remark"}],P=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],E=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"Input"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"Input"},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"InputTextArea"},{label:" ",field:"menu",slot:"menu",component:"Input"}];var p=I({name:"RoleDrawer",components:{BasicDrawer:R,BasicForm:h,BasicTree:$},emits:["success","register"],setup(e,{emit:n}){const t=D(!0),s=D([]),[r,{resetFields:f,setFieldsValue:l,validate:i}]=B({labelWidth:90,schemas:E,showActionButtonGroup:!1}),[c,{setDrawerProps:a,closeDrawer:u}]=j(async o=>{f(),a({confirmLoading:!1}),t.value=!!(o==null?void 0:o.isUpdate),F(t)&&l(b({},o.record)),s.value=await S()}),m=x(()=>F(t)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");async function g(){try{const o=await i();a({confirmLoading:!0}),console.log(o),u(),n("success")}finally{a({confirmLoading:!1})}}return{registerDrawer:c,registerForm:r,getTitle:m,handleSubmit:g,treeData:s}}});function V(e,n,t,s,r,f){const l=d("BasicTree"),i=d("BasicForm"),c=d("BasicDrawer");return C(),T(c,k(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:_(()=>[w(i,{onRegister:e.registerForm},{menu:_(({model:a,field:u})=>[w(l,{value:a[u],"onUpdate:value":m=>a[u]=m,treeData:e.treeData,replaceFields:{title:"menuName",key:"id"},checkable:"",toolbar:"",title:"\u83DC\u5355\u5206\u914D"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}p.render=V;var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:p});export{L as R,p as _,N as c,P as s};
