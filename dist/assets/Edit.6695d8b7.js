var t=Object.assign;import{_ as R,a as q}from"./useDrawer.3cc723e3.js";import{_ as E}from"./BasicForm.13ecb12b.js";import{u as O}from"./useForm.ac288eb4.js";import{cu as l,be as r,j as h,d as x,w as A,D,F as B,r as S,o as U,n as $,J as j,p as V,s as N}from"./index.b361f078.js";import{S as i,A as d}from"./commonEnum.da040d67.js";import{g as k}from"./formValidateService.703a8ce6.js";const a={Page:{url:i.AUTHORITY+"/loginLog/page",method:l.POST},Save:{url:i.AUTHORITY+"/loginLog",method:l.POST},Update:{url:i.AUTHORITY+"/loginLog",method:l.PUT},Delete:{url:i.AUTHORITY+"/loginLog",method:l.DELETE},Query:{url:i.AUTHORITY+"/loginLog/query",method:l.POST}},H=o=>r.request(t(t({},a.Page),{params:o})),C=o=>r.request(t(t({},a.Save),{params:o})),Y=o=>r.request(t(t({},a.Update),{params:o})),M=o=>r.request(t(t({},a.Delete),{params:o})),{t:e}=h(),z=[{title:e("lamp.system.loginLog.requestIp"),dataIndex:"requestIp"},{title:e("lamp.system.loginLog.userId"),dataIndex:"userId"},{title:e("lamp.system.loginLog.userName"),dataIndex:"userName"},{title:e("lamp.system.loginLog.account"),dataIndex:"account"},{title:e("lamp.system.loginLog.description"),dataIndex:"description"},{title:e("lamp.system.loginLog.loginDate"),dataIndex:"loginDate"},{title:e("lamp.system.loginLog.ua"),dataIndex:"ua"},{title:e("lamp.system.loginLog.browser"),dataIndex:"browser"},{title:e("lamp.system.loginLog.browserVersion"),dataIndex:"browserVersion"},{title:e("lamp.system.loginLog.operatingSystem"),dataIndex:"operatingSystem"},{title:e("lamp.system.loginLog.location"),dataIndex:"location"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],G=[{label:e("lamp.system.loginLog.requestIp"),field:"requestIp",component:"Input",colProps:{span:5}},{label:e("lamp.system.loginLog.userName"),field:"userName",component:"Input",colProps:{span:5}},{label:e("lamp.system.loginLog.account"),field:"account",component:"Input",colProps:{span:5}},{label:e("lamp.system.loginLog.description"),field:"description",component:"Input",colProps:{span:5}},{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],J=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.system.loginLog.requestIp"),field:"requestIp",component:"Input"},{label:e("lamp.system.loginLog.userId"),field:"userId",component:"Input"},{label:e("lamp.system.loginLog.userName"),field:"userName",component:"Input"},{label:e("lamp.system.loginLog.account"),field:"account",component:"Input"},{label:e("lamp.system.loginLog.description"),field:"description",component:"Input"},{label:e("lamp.system.loginLog.loginDate"),field:"loginDate",component:"Input"},{label:e("lamp.system.loginLog.ua"),field:"ua",component:"Input"},{label:e("lamp.system.loginLog.browser"),field:"browser",component:"Input"},{label:e("lamp.system.loginLog.browserVersion"),field:"browserVersion",component:"Input"},{label:e("lamp.system.loginLog.operatingSystem"),field:"operatingSystem",component:"Input"},{label:e("lamp.system.loginLog.location"),field:"location",component:"Input"}],Q=o=>[];var f=x({name:"LoginLogEdit",components:{BasicDrawer:R,BasicForm:E},emits:["success","register"],setup(o,{emit:I}){const{t:m}=h(),n=A(d.ADD),{createMessage:y}=B(),[L,{setFieldsValue:c,resetFields:p,updateSchema:T,validate:_}]=O({labelWidth:100,schemas:J,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setDrawerProps:g,closeDrawer:F}]=q(async s=>{await p(),g({confirmLoading:!1}),n.value=s==null?void 0:s.type;let b=a.Save;const w=t({},s==null?void 0:s.record);D(n)===d.EDIT?b=a.Update:w.id=void 0,await c(t({},w)),k(b,Q()).then(async u=>{u&&u.length>0&&await T(u)})});async function P(){try{const s=await _();g({confirmLoading:!0}),D(n)===d.EDIT?await Y(s):await C(s),y.success(m(`common.tips.${n.value}Success`)),F(),I("success")}finally{g({confirmLoading:!1})}}return{t:m,registerDrawer:v,registerForm:L,type:n,handleSubmit:P}}});function W(o,I,m,n,y,L){const c=S("BasicForm"),p=S("BasicDrawer");return U(),$(p,N(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:o.t(`common.title.${o.type}`),onOk:o.handleSubmit}),{default:j(()=>[V(c,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=W;var K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{K as E,f as _,z as c,H as p,M as r,G as s};
