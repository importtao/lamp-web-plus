var d=Object.assign;import{_,a as h}from"./useModal.31640c24.js";import{_ as B}from"./BasicForm.2d8a4167.js";import{u as M}from"./useForm.96bd58a3.js";import{da as v,d as D,w as I,k as w,D as m,r as p,o as C,n as P,J as S,p as k,s as y}from"./index.f012a3f4.js";import{T as N}from"./index.5919009b.js";import{a as T}from"./system.0e14e178.js";const j=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",width:160,align:"left"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const t=~~e.status==0,a=t?"green":"red",s=t?"\u542F\u7528":"\u505C\u7528";return v(N,{color:a},()=>s)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5907\u6CE8",dataIndex:"remark"}],x=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],$=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",required:!0},{field:"parentDept",label:"\u4E0A\u7EA7\u90E8\u95E8",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"orderNo",label:"\u6392\u5E8F",component:"InputNumber",required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},required:!0},{label:"\u5907\u6CE8",field:"remark",component:"InputTextArea"}];var i=D({name:"DeptModal",components:{BasicModal:_,BasicForm:B},emits:["success","register"],setup(e,{emit:u}){const t=I(!0),[a,{resetFields:s,setFieldsValue:c,updateSchema:n,validate:r}]=M({labelWidth:100,schemas:$,showActionButtonGroup:!1}),[f,{setModalProps:l,closeModal:F}]=h(async o=>{s(),l({confirmLoading:!1}),t.value=!!(o==null?void 0:o.isUpdate),m(t)&&c(d({},o.record));const E=await T();n({field:"parentDept",componentProps:{treeData:E}})}),g=w(()=>m(t)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8");async function b(){try{const o=await r();l({confirmLoading:!0}),console.log(o),F(),u("success")}finally{l({confirmLoading:!1})}}return{registerModal:f,registerForm:a,getTitle:g,handleSubmit:b}}});function R(e,u,t,a,s,c){const n=p("BasicForm"),r=p("BasicModal");return C(),P(r,y(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:S(()=>[k(n,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}i.render=R;var A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:i});export{A as D,i as _,j as c,x as s};
