import{S as s,_ as h,d as A,Q as R,R as ie,V as _,cw as B,bk as ae,a6 as le,cH as ce,X as W,a2 as he,Y as z,Z as D,p,b1 as de,e2 as fe,O as ue,as as pe,a0 as U,a3 as me,a4 as ve,bn as X,bb as ye,W as we,bK as be}from"./index.b361f078.js";var K={width:s.any,height:s.any,defaultOpen:s.looseBool,firstEnter:s.looseBool,open:s.looseBool,prefixCls:s.string,placement:s.string,level:s.oneOfType([s.string,s.array]),levelMove:s.oneOfType([s.number,s.func,s.array]),ease:s.string,duration:s.string,handler:s.any,showMask:s.looseBool,maskStyle:s.object,className:s.string,wrapStyle:s.object,maskClosable:s.looseBool,afterVisibleChange:s.func,keyboard:s.looseBool},Ce=h(h({},K),{},{wrapperClassName:s.string,forceRender:s.looseBool,getContainer:s.oneOfType([s.string,s.func,s.object,s.looseBool])});h(h({},K),{},{getContainer:s.func,getOpenCount:s.func,switchScrollingEffect:s.func});function ge(n){return Array.isArray(n)?n:[n]}var V={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},Y=Object.keys(V).filter(function(n){if(typeof document=="undefined")return!1;var e=document.getElementsByTagName("html")[0];return n in(e?e.style:{})})[0],G=V[Y];function Z(n,e,t,o){n.addEventListener?n.addEventListener(e,t,o):n.attachEvent&&n.attachEvent("on".concat(e),t)}function q(n,e,t,o){n.removeEventListener?n.removeEventListener(e,t,o):n.attachEvent&&n.detachEvent("on".concat(e),t)}function De(n,e){var t;return typeof n=="function"?t=n(e):t=n,Array.isArray(t)?t.length===2?t:[t[0],t[1]]:[t]}var Q=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},Se=["class","style"];function N(){}var $={},M=!(typeof window!="undefined"&&window.document&&window.document.createElement),Ee=A({name:"Drawer",mixins:[R],inheritAttrs:!1,props:ie(Ce,{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",firstEnter:!1,showMask:!0,handler:!0,maskStyle:{},wrapperClassName:""}),data:function(){this.levelDom=[],this.contentDom=null,this.maskDom=null,this.handlerdom=null,this.mousePos=null,this.sFirstEnter=this.firstEnter,this.timeout=null,this.children=null,this.dom=null,this.drawerId=Number((Date.now()+Math.random()).toString().replace(".",Math.round(Math.random()*9))).toString(16);var e=this.open!==void 0?this.open:!!this.defaultOpen;return $[this.drawerId]=e,this.orignalOpen=this.open,this.preProps=h({},this.$props),{sOpen:e,isOpenChange:void 0,passive:void 0,container:void 0}},watch:{open:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){var e=this;n!==void 0&&n!==this.preProps.open&&(this.isOpenChange=!0,this.container||this.getDefault(this.$props),this.setState({sOpen:open})),this.preProps.open=n,n&&setTimeout(function(){e.domFocus()})}),placement:function(e){e!==this.preProps.placement&&(this.contentDom=null),this.preProps.placement=e},level:function(e){this.preProps.level!==e&&this.getParentAndLevelDom(this.$props),this.preProps.level=e}},mounted:function(){var e=this;_(function(){M||(e.passive=B?{passive:!1}:!1);var t=e.getOpen();(e.handler||t||e.sFirstEnter)&&(e.getDefault(e.$props),t&&(e.isOpenChange=!0,_(function(){e.domFocus()})),e.$forceUpdate())})},updated:function(){var e=this;_(function(){!e.sFirstEnter&&e.container&&(e.$forceUpdate(),e.sFirstEnter=!0)})},beforeUnmount:function(){delete $[this.drawerId],delete this.isOpenChange,this.container&&(this.sOpen&&this.setLevelDomTransform(!1,!0),document.body.style.overflow=""),this.sFirstEnter=!1,clearTimeout(this.timeout)},methods:{domFocus:function(){this.dom&&this.dom.focus()},onKeyDown:function(e){e.keyCode===ae.ESC&&(e.stopPropagation(),this.__emit("close",e))},onMaskTouchEnd:function(e){this.__emit("close",e),this.onTouchEnd(e,!0)},onIconTouchEnd:function(e){this.__emit("handleClick",e),this.onTouchEnd(e)},onTouchEnd:function(e,t){if(this.open===void 0){var o=t||this.sOpen;this.isOpenChange=!0,this.setState({sOpen:!o})}},onWrapperTransitionEnd:function(e){if(e.target===this.contentWrapper&&e.propertyName.match(/transform$/)){var t=this.getOpen();this.dom.style.transition="",!t&&this.getCurrentDrawerSome()&&(document.body.style.overflowX="",this.maskDom&&(this.maskDom.style.left="",this.maskDom.style.width="")),this.afterVisibleChange&&this.afterVisibleChange(!!t)}},getDefault:function(e){this.getParentAndLevelDom(e),(e.getContainer||e.parent)&&(this.container=this.defaultGetContainer())},getCurrentDrawerSome:function(){return!Object.keys($).some(function(e){return $[e]})},getSelfContainer:function(){return this.container},getParentAndLevelDom:function(e){var t=this;if(!M){var o=e.level,i=e.getContainer;if(this.levelDom=[],i){if(typeof i=="string"){var r=document.querySelectorAll(i)[0];this.parent=r}typeof i=="function"&&(this.parent=i()),le(i)==="object"&&i instanceof window.HTMLElement&&(this.parent=i)}if(!i&&this.container&&(this.parent=this.container.parentNode),o==="all"){var l=Array.prototype.slice.call(this.parent.children);l.forEach(function(a){a.nodeName!=="SCRIPT"&&a.nodeName!=="STYLE"&&a.nodeName!=="LINK"&&a!==t.container&&t.levelDom.push(a)})}else o&&ge(o).forEach(function(a){document.querySelectorAll(a).forEach(function(c){t.levelDom.push(c)})})}},setLevelDomTransform:function(e,t,o,i){var r=this,l=this.$props,a=l.placement,c=l.levelMove,d=l.duration,m=l.ease,w=l.getContainer;if(!M&&(this.levelDom.forEach(function(u){if(u&&(r.isOpenChange||t)){u.style.transition="transform ".concat(d," ").concat(m),Z(u,G,r.trnasitionEnd);var y=e?i:0;if(c){var x=De(c,{target:u,open:e});y=e?x[0]:x[1]||0}var O=typeof y=="number"?"".concat(y,"px"):y,P=a==="left"||a==="top"?O:"-".concat(O);u.style.transform=y?"".concat(o,"(").concat(P,")"):"",u.style.msTransform=y?"".concat(o,"(").concat(P,")"):""}}),w==="body")){var v=["touchstart"],S=[document.body,this.maskDom,this.handlerdom,this.contentDom],f=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?ce(1):0,E="width ".concat(d," ").concat(m),C="transform ".concat(d," ").concat(m);if(e&&document.body.style.overflow!=="hidden"){if(document.body.style.overflow="hidden",f&&(document.body.style.position="relative",document.body.style.width="calc(100% - ".concat(f,"px)"),clearTimeout(this.timeout),this.dom)){switch(this.dom.style.transition="none",a){case"right":this.dom.style.transform="translateX(-".concat(f,"px)"),this.dom.style.msTransform="translateX(-".concat(f,"px)");break;case"top":case"bottom":this.dom.style.width="calc(100% - ".concat(f,"px)"),this.dom.style.transform="translateZ(0)";break}this.timeout=setTimeout(function(){r.dom.style.transition="".concat(C,",").concat(E),r.dom.style.width="",r.dom.style.transform="",r.dom.style.msTransform=""})}S.forEach(function(u,y){!u||Z(u,v[y]||"touchmove",y?r.removeMoveHandler:r.removeStartHandler,r.passive)})}else if(this.getCurrentDrawerSome()){if(document.body.style.overflow="",(this.isOpenChange||t)&&f&&(document.body.style.position="",document.body.style.width="",Y&&(document.body.style.overflowX="hidden"),a==="right"&&this.maskDom&&(this.maskDom.style.left="-".concat(f,"px"),this.maskDom.style.width="calc(100% + ".concat(f,"px)")),clearTimeout(this.timeout),this.dom)){this.dom.style.transition="none";var g;switch(a){case"right":{this.dom.style.transform="translateX(".concat(f,"px)"),this.dom.style.msTransform="translateX(".concat(f,"px)"),this.dom.style.width="100%",E="width 0s ".concat(m," ").concat(d);break}case"top":case"bottom":{this.dom.style.width="calc(100% + ".concat(f,"px)"),this.dom.style.height="100%",this.dom.style.transform="translateZ(0)",g="height 0s ".concat(m," ").concat(d);break}}this.timeout=setTimeout(function(){r.dom.style.transition="".concat(C,",").concat(g?"".concat(g,","):"").concat(E),r.dom.style.transform="",r.dom.style.msTransform="",r.dom.style.width="",r.dom.style.height=""})}S.forEach(function(u,y){!u||q(u,v[y]||"touchmove",y?r.removeMoveHandler:r.removeStartHandler,r.passive)})}}var k=this.$attrs.onChange;k&&this.isOpenChange&&this.sFirstEnter&&(k(e),this.isOpenChange=!1)},getChildToRender:function(e){var t,o=this,i,r=this.$props,l=r.prefixCls,a=r.placement,c=r.handler,d=r.showMask,m=r.maskStyle,w=r.width,v=r.height,S=r.wrapStyle,f=r.keyboard,E=r.maskClosable,C=this.$attrs,g=C.class,k=C.style,u=W(C,Se),y=he(this),x=z(l,(t={},D(t,"".concat(l,"-").concat(a),!0),D(t,"".concat(l,"-open"),e),D(t,"no-mask",!d),D(t,g,g),t)),O=this.isOpenChange,P=a==="left"||a==="right",H="translate".concat(P?"X":"Y"),J=a==="left"||a==="top"?"-100%":"100%",I=e?"":"".concat(H,"(").concat(J,")");if(O===void 0||O){var ee=this.contentDom?this.contentDom.getBoundingClientRect()[P?"width":"height"]:0,te=(P?w:v)||ee;this.setLevelDomTransform(e,!1,H,te)}var F;if(c!==!1){var ne=p("div",{class:"drawer-handle",onClick:function(){}},[p("i",{class:"drawer-handle-icon"},null)]),se=this.handler,L=se||ne,j=L.props&&L.props.onClick;F=de(L,{onClick:function(b){j&&j(b),o.onIconTouchEnd(b)},ref:function(b){o.handlerdom=b}})}var oe=h(h({},u),{},{class:x,onTransitionend:this.onWrapperTransitionEnd,onKeydown:e&&f?this.onKeyDown:N,style:h(h({},S),k)}),re=(i={},D(i,B?"onTouchstartPassive":"onTouchstart",e?this.removeStartHandler:N),D(i,B?"onTouchmovePassive":"onTouchmove",e?this.removeMoveHandler:N),i);return p("div",h(h({ref:function(b){o.dom=b}},oe),{},{tabindex:-1}),[d&&p("div",{key:e,class:"".concat(l,"-mask"),onClick:E?this.onMaskTouchEnd:N,style:m,ref:function(b){o.maskDom=b}},null),p("div",{class:"".concat(l,"-content-wrapper"),style:{transform:I,msTransform:I,width:Q(w)?"".concat(w,"px"):w,height:Q(v)?"".concat(v,"px"):v},ref:function(b){o.contentWrapper=b}},[p("div",h({class:"".concat(l,"-content"),ref:function(b){o.contentDom=b}},re),[y]),F])])},getOpen:function(){return this.open!==void 0?this.open:this.sOpen},getTouchParentScroll:function(e,t,o,i){if(!t||t===document)return!1;if(t===e.parentNode)return!0;var r=Math.max(Math.abs(o),Math.abs(i))===Math.abs(i),l=Math.max(Math.abs(o),Math.abs(i))===Math.abs(o),a=t.scrollHeight-t.clientHeight,c=t.scrollWidth-t.clientWidth,d=t.scrollTop,m=t.scrollLeft;t.scrollTo&&t.scrollTo(t.scrollLeft+1,t.scrollTop+1);var w=t.scrollTop,v=t.scrollLeft;return t.scrollTo&&t.scrollTo(t.scrollLeft-1,t.scrollTop-1),r&&(!a||!(w-d)||a&&(t.scrollTop>=a&&i<0||t.scrollTop<=0&&i>0))||l&&(!c||!(v-m)||c&&(t.scrollLeft>=c&&o<0||t.scrollLeft<=0&&o>0))?this.getTouchParentScroll(e,t.parentNode,o,i):!1},removeStartHandler:function(e){e.touches.length>1||(this.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},removeMoveHandler:function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,o=e.changedTouches[0].clientX-this.startPos.x,i=e.changedTouches[0].clientY-this.startPos.y;(t===this.maskDom||t===this.handlerdom||t===this.contentDom&&this.getTouchParentScroll(t,e.target,o,i))&&e.preventDefault()}},trnasitionEnd:function(e){q(e.target,G,this.trnasitionEnd),e.target.style.transition=""},defaultGetContainer:function(){if(M)return null;var e=document.createElement("div");return this.parent.appendChild(e),this.wrapperClassName&&(e.className=this.wrapperClassName),e}},render:function(){var e=this,t=this.$props,o=t.getContainer,i=t.wrapperClassName,r=t.handler,l=t.forceRender,a=this.getOpen(),c=null;$[this.drawerId]=a&&this.container;var d=this.getChildToRender(this.sFirstEnter?a:!1);if(!o)return p("div",{class:i,ref:function(v){e.container=v}},[d]);if(!this.container||!a&&!this.sFirstEnter)return null;var m=!!r||l;return(m||a||this.dom)&&(c=p(fe,{to:this.getSelfContainer()},{default:function(){return[d]}})),c}}),ke=["prefixCls","width","height","visible","placement","wrapClassName","mask"],Pe=pe("top","right","bottom","left"),Te=A({name:"ADrawer",mixins:[R],inheritAttrs:!1,props:{closable:s.looseBool.def(!0),destroyOnClose:s.looseBool,getContainer:s.any,maskClosable:s.looseBool.def(!0),mask:s.looseBool.def(!0),maskStyle:s.object,wrapStyle:s.object,bodyStyle:s.object,headerStyle:s.object,drawerStyle:s.object,title:s.VNodeChild,visible:s.looseBool,width:s.oneOfType([s.string,s.number]).def(256),height:s.oneOfType([s.string,s.number]).def(256),zIndex:s.number,prefixCls:s.string,placement:s.oneOf(Pe).def("right"),level:s.any.def(null),wrapClassName:s.string,handle:s.VNodeChild,afterVisibleChange:s.func,keyboard:s.looseBool.def(!0),onClose:s.func,"onUpdate:visible":s.func},setup:function(e){var t=U("configProvider",me);return{configProvider:t,destroyClose:!1,preVisible:e.visible,parentDrawer:U("parentDrawer",null)}},data:function(){return{sPush:!1}},beforeCreate:function(){ve("parentDrawer",this)},mounted:function(){var e=this.visible;e&&this.parentDrawer&&this.parentDrawer.push()},updated:function(){var e=this;_(function(){e.preVisible!==e.visible&&e.parentDrawer&&(e.visible?e.parentDrawer.push():e.parentDrawer.pull()),e.preVisible=e.visible})},beforeUnmount:function(){this.parentDrawer&&this.parentDrawer.pull()},methods:{domFocus:function(){this.$refs.vcDrawer&&this.$refs.vcDrawer.domFocus()},close:function(e){this.$emit("update:visible",!1),this.$emit("close",e)},push:function(){this.setState({sPush:!0})},pull:function(){var e=this;this.setState({sPush:!1},function(){e.domFocus()})},onDestroyTransitionEnd:function(){var e=this.getDestroyOnClose();!e||this.visible||(this.destroyClose=!0,this.$forceUpdate())},getDestroyOnClose:function(){return this.destroyOnClose&&!this.visible},getPushTransform:function(e){if(e==="left"||e==="right")return"translateX(".concat(e==="left"?180:-180,"px)");if(e==="top"||e==="bottom")return"translateY(".concat(e==="top"?180:-180,"px)")},getRcDrawerStyle:function(){var e=this.$props,t=e.zIndex,o=e.placement,i=e.wrapStyle,r=this.$data.sPush;return h({zIndex:t,transform:r?this.getPushTransform(o):void 0},i)},renderHeader:function(e){var t=this.$props,o=t.closable,i=t.headerStyle,r=X(this,"title");if(!r&&!o)return null;var l=r?"".concat(e,"-header"):"".concat(e,"-header-no-title");return p("div",{class:l,style:i},[r&&p("div",{class:"".concat(e,"-title")},[r]),o?this.renderCloseIcon(e):null])},renderCloseIcon:function(e){var t=this.closable;return t&&p("button",{key:"closer",onClick:this.close,"aria-label":"Close",class:"".concat(e,"-close")},[p(ye,null,null)])},renderBody:function(e){var t,o;if(this.destroyClose&&!this.visible)return null;this.destroyClose=!1;var i=this.$props,r=i.bodyStyle,l=i.drawerStyle,a={},c=this.getDestroyOnClose();return c&&(a.opacity=0,a.transition="opacity .3s"),p("div",{class:"".concat(e,"-wrapper-body"),style:h(h({},a),l),onTransitionend:this.onDestroyTransitionEnd},[this.renderHeader(e),p("div",{key:"body",class:"".concat(e,"-body"),style:r},[(t=(o=this.$slots).default)===null||t===void 0?void 0:t.call(o)])])}},render:function(){var e,t=this,o=we(this),i=o.prefixCls,r=o.width,l=o.height,a=o.visible,c=o.placement,d=o.wrapClassName,m=o.mask,w=W(o,ke),v=m?"":"no-mask",S={};c==="left"||c==="right"?S.width=typeof r=="number"?"".concat(r,"px"):r:S.height=typeof l=="number"?"".concat(l,"px"):l;var f=X(this,"handle")||!1,E=this.configProvider.getPrefixCls,C=E("drawer",i),g=this.$attrs.class,k=h(h(h(h({},this.$attrs),be(w,["closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","visible","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","pageHeader","autoInsertSpaceInButton"])),{},{onClose:this.close,handler:f},S),{},{prefixCls:C,open:a,showMask:m,placement:c,class:z((e={},D(e,g,!!g),D(e,d,!!d),D(e,v,!!v),e)),wrapStyle:this.getRcDrawerStyle(),ref:"vcDrawer"});return p(Ee,k,{default:function(){return[t.renderBody(C)]}})}}),Oe=ue(Te);export{Oe as D};
