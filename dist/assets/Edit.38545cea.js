var a=Object.assign;import{_ as E,a as T}from"./useDrawer.1dca4d34.js";import{_ as B}from"./BasicForm.8a90524a.js";import{u as $}from"./useForm.1103fde3.js";import{cu as n,be as i,j as D,d as j,w as x,D as S,F as V,r as _,o as G,n as k,J as q,p as A,s as C}from"./index.b7a14d4f.js";import{S as l,A as g}from"./commonEnum.da040d67.js";import{g as L}from"./formValidateService.993b7545.js";const s={Page:{url:l.ORG+"/org/page",method:n.POST},Save:{url:l.ORG+"/org",method:n.POST},Update:{url:l.ORG+"/org",method:n.PUT},Delete:{url:l.ORG+"/org",method:n.DELETE},Query:{url:l.ORG+"/org/query",method:n.POST}},U=t=>i.request(a(a({},s.Page),{params:t})),M=t=>i.request(a(a({},s.Save),{params:t})),z=t=>i.request(a(a({},s.Update),{params:t})),H=t=>i.request(a(a({},s.Delete),{params:t})),{t:e}=D(),J=[{title:e("lamp.org.org.label"),dataIndex:"label"},{title:e("lamp.org.org.type"),dataIndex:"type"},{title:e("lamp.org.org.abbreviation"),dataIndex:"abbreviation"},{title:e("lamp.org.org.parentId"),dataIndex:"parentId"},{title:e("lamp.org.org.treePath"),dataIndex:"treePath"},{title:e("lamp.org.org.sortValue"),dataIndex:"sortValue"},{title:e("lamp.org.org.state"),dataIndex:"state"},{title:e("lamp.org.org.describe"),dataIndex:"describe"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.org.org.label"),field:"label",component:"Input"},{label:e("lamp.org.org.type"),field:"type",component:"Input"},{label:e("lamp.org.org.abbreviation"),field:"abbreviation",component:"Input"},{label:e("lamp.org.org.parentId"),field:"parentId",component:"Input"},{label:e("lamp.org.org.treePath"),field:"treePath",component:"Input"},{label:e("lamp.org.org.sortValue"),field:"sortValue",component:"Input"},{label:e("lamp.org.org.state"),field:"state",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.org.org.describe"),field:"describe",component:"Input"}],W=t=>[];var f=j({name:"OrgEdit",components:{BasicDrawer:E,BasicForm:B},emits:["success","register"],setup(t,{emit:b}){const{t:m}=D(),r=x(g.ADD),{createMessage:h}=V(),[I,{setFieldsValue:c,resetFields:p,updateSchema:y,validate:P}]=$({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[F,{setDrawerProps:d,closeDrawer:R}]=T(async o=>{await p(),d({confirmLoading:!1}),r.value=o==null?void 0:o.type;let w=s.Save;const v=a({},o==null?void 0:o.record);S(r)===g.EDIT?w=s.Update:v.id=void 0,await c(a({},v)),L(w,W()).then(async u=>{u&&u.length>0&&await y(u)})});async function O(){try{const o=await P();d({confirmLoading:!0}),S(r)===g.EDIT?await z(o):await M(o),h.success(m(`common.tips.${r.value}Success`)),R(),b("success")}finally{d({confirmLoading:!1})}}return{t:m,registerDrawer:F,registerForm:I,type:r,handleSubmit:O}}});function K(t,b,m,r,h,I){const c=_("BasicForm"),p=_("BasicDrawer");return G(),k(p,C(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:q(()=>[A(c,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,U as p,H as r,N as s};
