var f=Object.assign;import{_ as y}from"./PageWrapper.06ac3dfa.js";import{u as w}from"./index.esm.145cf43a.js";import{d as C,v as _,y as O,ap as x,k as v,ek as I,c1 as L,r as n,o as g,n as h,J as r,p as t,L as d,q as c,M as S,aE as V}from"./index.f012a3f4.js";import{T as A}from"./index.5919009b.js";import"./usePageContext.2729de0d.js";import"./onMountedOrActivated.a84ead65.js";import"./index.df461530.js";import"./index.069b5dd9.js";import"./useBreakpoint.521f32f2.js";import"./responsiveObserve.40f9db24.js";import"./useSize.5c4412c9.js";import"./transButton.77ed102e.js";import"./ArrowLeftOutlined.61d94bda.js";import"./vendor.352e3120.js";var k=C({components:{PageWrapper:y,[_.name]:_,InputTextArea:_.TextArea,Tag:A},setup(){const e=O({server:"ws://localhost:3380/test",sendValue:"",recordList:[]}),{status:o,data:l,send:b,close:T,open:j}=w(e.server,{autoReconnect:!0,heartbeat:!0});x(()=>{if(l.value)try{const s=JSON.parse(l.value);e.recordList.push(s)}catch(s){e.recordList.push({res:l.value,id:Math.ceil(Math.random()*1e3),time:new Date().getTime()})}});const a=v(()=>o.value==="OPEN"),p=v(()=>a.value?"success":"red"),i=v(()=>[...e.recordList].reverse());function u(){b(e.sendValue),e.sendValue=""}function m(){a.value?T():j()}return f(f({status:o,formatToDateTime:I},L(e)),{handlerSend:u,getList:i,toggle:m,getIsOpen:a,getTagColor:p})}});const P={class:"flex"},W={class:"w-1/3 bg-white p-4"},B={class:"flex items-center"},$=t("span",{class:"text-lg font-medium mr-4"}," \u8FDE\u63A5\u72B6\u6001: ",-1),D=t("hr",{class:"my-4"},null,-1),M={class:"flex"},N=d(" \u670D\u52A1\u5730\u5740 "),E=t("p",{class:"text-lg font-medium mt-4"},"\u8BBE\u7F6E",-1),J=t("hr",{class:"my-4"},null,-1),R=d(" \u53D1\u9001 "),U={class:"w-2/3 bg-white ml-4 p-4"},q=t("span",{class:"text-lg font-medium mr-4"}," \u6D88\u606F\u8BB0\u5F55: ",-1),z=t("hr",{class:"my-4"},null,-1),F={class:"max-h-80 overflow-auto"},G={class:"flex items-center"},H=t("span",{class:"mr-2 text-primary font-medium"},"\u6536\u5230\u6D88\u606F:",-1);function K(e,o,l,b,T,j){const a=n("Tag"),p=n("a-input"),i=n("a-button"),u=n("InputTextArea"),m=n("PageWrapper");return g(),h(m,{title:"WebSocket \u793A\u4F8B"},{default:r(()=>[t("div",P,[t("div",W,[t("div",B,[$,t(a,{color:e.getTagColor},{default:r(()=>[d(c(e.status),1)]),_:1},8,["color"])]),D,t("div",M,[t(p,{value:e.server,"onUpdate:value":o[1]||(o[1]=s=>e.server=s),disabled:""},{addonBefore:r(()=>[N]),_:1},8,["value"]),t(i,{type:e.getIsOpen?"danger":"primary",onClick:e.toggle},{default:r(()=>[d(c(e.getIsOpen?"\u5173\u95ED\u8FDE\u63A5":"\u5F00\u542F\u8FDE\u63A5"),1)]),_:1},8,["type","onClick"])]),E,J,t(u,{placeholder:"\u9700\u8981\u53D1\u9001\u5230\u670D\u52A1\u5668\u7684\u5185\u5BB9",disabled:!e.getIsOpen,value:e.sendValue,"onUpdate:value":o[2]||(o[2]=s=>e.sendValue=s),allowClear:""},null,8,["disabled","value"]),t(i,{type:"primary",block:"",class:"mt-4",disabled:!e.getIsOpen,onClick:e.handlerSend},{default:r(()=>[R]),_:1},8,["disabled","onClick"])]),t("div",U,[q,z,t("div",F,[t("ul",null,[(g(!0),h(S,null,V(e.getList,s=>(g(),h("li",{class:"border-b-1 mt-2",key:s.time},[t("div",G,[H,t("span",null,c(e.formatToDateTime(s.time)),1)]),t("div",null,c(s.res),1)]))),128))])])])])]),_:1})}k.render=K;export default k;
