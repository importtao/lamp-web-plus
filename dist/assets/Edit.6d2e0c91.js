var t=Object.assign;import{_ as R,a as P}from"./useDrawer.78890a21.js";import{_ as x}from"./BasicForm.71637030.js";import{u as B}from"./useForm.eec49fca.js";import{cu as l,be as n,j as S,d as k,w as q,D as w,F as L,r as D,o as $,n as j,J as M,p as O,s as C}from"./index.0523a5a3.js";import{S as i,A as g}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.5ed66daa.js";const s={Page:{url:i.MATERIALS+"/categoryField/page",method:l.POST},Save:{url:i.MATERIALS+"/categoryField",method:l.POST},Update:{url:i.MATERIALS+"/categoryField",method:l.PUT},Delete:{url:i.MATERIALS+"/categoryField",method:l.DELETE},Query:{url:i.MATERIALS+"/categoryField/query",method:l.POST}},V=a=>n.request(t(t({},s.Page),{params:a})),G=a=>n.request(t(t({},s.Save),{params:a})),z=a=>n.request(t(t({},s.Update),{params:a})),H=a=>n.request(t(t({},s.Delete),{params:a})),{t:e}=S(),J=[{title:e("lamp.materials.categoryField.categoryId"),dataIndex:"categoryId"},{title:e("lamp.materials.categoryField.name"),dataIndex:"name"},{title:e("lamp.materials.categoryField.type"),dataIndex:"type"},{title:e("lamp.materials.categoryField.required"),dataIndex:"required"},{title:e("lamp.materials.categoryField.orderIndex"),dataIndex:"orderIndex"},{title:e("lamp.materials.categoryField.remark"),dataIndex:"remark"},{title:e("lamp.materials.categoryField.version"),dataIndex:"version"},{title:e("lamp.materials.categoryField.isDelete"),dataIndex:"isDelete"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.categoryField.categoryId"),field:"categoryId",component:"Input"},{label:e("lamp.materials.categoryField.name"),field:"name",component:"Input"},{label:e("lamp.materials.categoryField.type"),field:"type",component:"Input"},{label:e("lamp.materials.categoryField.required"),field:"required",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}},{label:e("lamp.materials.categoryField.orderIndex"),field:"orderIndex",component:"Input"},{label:e("lamp.materials.categoryField.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.categoryField.version"),field:"version",component:"Input"},{label:e("lamp.materials.categoryField.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],W=a=>[];var f=k({name:"CategoryFieldEdit",components:{BasicDrawer:R,BasicForm:x},emits:["success","register"],setup(a,{emit:y}){const{t:m}=S(),r=q(g.ADD),{createMessage:F}=L(),[I,{setFieldsValue:c,resetFields:d,updateSchema:b,validate:_}]=B({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[E,{setDrawerProps:p,closeDrawer:T}]=P(async o=>{await d(),p({confirmLoading:!1}),r.value=o==null?void 0:o.type;let h=s.Save;const v=t({},o==null?void 0:o.record);w(r)===g.EDIT?h=s.Update:v.id=void 0,await c(t({},v)),U(h,W()).then(async u=>{u&&u.length>0&&await b(u)})});async function A(){try{const o=await _();p({confirmLoading:!0}),w(r)===g.EDIT?await z(o):await G(o),F.success(m(`common.tips.${r.value}Success`)),T(),y("success")}finally{p({confirmLoading:!1})}}return{t:m,registerDrawer:E,registerForm:I,type:r,handleSubmit:A}}});function K(a,y,m,r,F,I){const c=D("BasicForm"),d=D("BasicDrawer");return $(),j(d,C(a.$attrs,{onRegister:a.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:a.t(`common.title.${a.type}`),onOk:a.handleSubmit}),{default:M(()=>[O(c,{onRegister:a.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,V as p,H as r,N as s};
