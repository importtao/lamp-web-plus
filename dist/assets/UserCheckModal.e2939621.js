import{_ as b,a as w}from"./useModal.1ae7183e.js";import{u as A}from"./useFormItem.4d35203f.js";import{d as F,aC as r,w as l,bY as B,j as T,k as O,ap as U,aB as $,r as p,o as M,n as R,J as I,p as P,s as q}from"./index.ff8e7350.js";import{T as E,q as L}from"./user.301754be.js";import{g as W}from"./get.25e661a1.js";import"./useWindowSizeFn.dd41c952.js";import"./FullscreenOutlined.f5cc85ae.js";import"./vendor.352e3120.js";import"./index.7b8b790f.js";import"./transButton.8f04232b.js";import"./DeleteOutlined.11a704c5.js";import"./commonEnum.da040d67.js";var y=F({name:"UserTransfer",components:{Transfer:E,BasicModal:b},props:{value:r.string,multiple:r.bool,numberToString:r.bool,targetKeysApi:{type:Function,default:null},params:{type:Object,default:()=>{}},targetKeysParams:{type:Object,default:()=>{}},resultField:r.string.def("")},emits:["handleSelectChange","handleChange","handleScroll"],setup(e,{emit:s}){const i=l({}),f=l([]),o=l([]),c=l([]),d=B(),{t:u}=T(),[n]=A(e),h=O(()=>o.value);U(()=>{j()});const C=(t,a,g)=>{console.log("targetKeys: ",t),console.log("direction: ",a),console.log("moveKeys: ",g),s("handleSelectChange",null)},K=(t,a)=>{console.log("sourceSelectedKeys: ",t),console.log("targetSelectedKeys: ",a),s("handleChange",null)},S=(t,a)=>{s("handleScroll",null)};async function j(){try{const t=await L(e.params);if(Array.isArray(t)){o.value=t.map(m=>({key:m.id,title:m.name,description:m.name,disabled:!1}));return}e.resultField&&(o.value=W(t,e.resultField)||[]);const a=e.targetKeysApi;if(!a||!$(a))return;const g=await a(e.targetKeysParams);Array.isArray(t)&&(c.value=g)}catch(t){console.warn(t)}finally{}}function k(){console.log()}const[v]=w(t=>{i.value={users:t}});return{state:n,attrs:d,allUser:o,t:u,getAllUserList:h,handleSelectChange:K,handleChange:C,handleScroll:S,modelRef:i,targetKeys:c,selectedKeys:f,save:k,register:v}}});function z(e,s,i,f,o,c){const d=p("Transfer"),u=p("BasicModal");return M(),R(u,q(e.$attrs,{onRegister:e.register,title:"\u9009\u62E9\u7528\u6237",width:"600px"}),{default:I(()=>[P(d,{"target-keys":e.targetKeys,"onUpdate:target-keys":s[1]||(s[1]=n=>e.targetKeys=n),"selected-keys":e.selectedKeys,"onUpdate:selected-keys":s[2]||(s[2]=n=>e.selectedKeys=n),"data-source":e.getAllUserList,titles:["\u5168\u90E8\u7528\u6237","\u5DF2\u9009\u7528\u6237"],render:n=>n.title,"show-search":"",oneWay:"","list-style":{width:"250px",height:"600px"},onChange:e.handleChange,onSelectChange:e.handleSelectChange,onScroll:e.handleScroll,onOk:e.save},null,8,["target-keys","selected-keys","data-source","render","onChange","onSelectChange","onScroll","onOk"])]),_:1},16,["onRegister"])}y.render=z;export default y;
