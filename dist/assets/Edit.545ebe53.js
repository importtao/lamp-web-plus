var t=Object.assign;import{_ as R,a as y}from"./useDrawer.803df328.js";import{_ as P}from"./BasicForm.2d8a4167.js";import{u as x}from"./useForm.96bd58a3.js";import{cu as m,be as l,j as D,d as B,w as L,D as v,F as $,r as b,o as j,n as M,J as O,p as q,s as C}from"./index.f012a3f4.js";import{S as n,A as I}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.8fbd814e.js";const o={Page:{url:n.MATERIALS+"/skuItem/page",method:m.POST},Save:{url:n.MATERIALS+"/skuItem",method:m.POST},Update:{url:n.MATERIALS+"/skuItem",method:m.PUT},Delete:{url:n.MATERIALS+"/skuItem",method:m.DELETE},Query:{url:n.MATERIALS+"/skuItem/query",method:m.POST}},V=a=>l.request(t(t({},o.Page),{params:a})),G=a=>l.request(t(t({},o.Save),{params:a})),z=a=>l.request(t(t({},o.Update),{params:a})),H=a=>l.request(t(t({},o.Delete),{params:a})),{t:e}=D(),J=[{title:e("lamp.materials.skuItem.materialsId"),dataIndex:"materialsId"},{title:e("lamp.materials.skuItem.parentId"),dataIndex:"parentId"},{title:e("lamp.materials.skuItem.name"),dataIndex:"name"},{title:e("lamp.materials.skuItem.orderIndex"),dataIndex:"orderIndex"},{title:e("lamp.materials.skuItem.remark"),dataIndex:"remark"},{title:e("lamp.materials.skuItem.version"),dataIndex:"version"},{title:e("lamp.materials.skuItem.isDelete"),dataIndex:"isDelete"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.skuItem.materialsId"),field:"materialsId",component:"Input"},{label:e("lamp.materials.skuItem.parentId"),field:"parentId",component:"Input"},{label:e("lamp.materials.skuItem.name"),field:"name",component:"Input"},{label:e("lamp.materials.skuItem.orderIndex"),field:"orderIndex",component:"Input"},{label:e("lamp.materials.skuItem.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.skuItem.version"),field:"version",component:"Input"},{label:e("lamp.materials.skuItem.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],W=a=>[];var f=B({name:"SkuItemEdit",components:{BasicDrawer:R,BasicForm:P},emits:["success","register"],setup(a,{emit:k}){const{t:i}=D(),r=L(I.ADD),{createMessage:g}=$(),[S,{setFieldsValue:c,resetFields:u,updateSchema:_,validate:E}]=x({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[T,{setDrawerProps:p,closeDrawer:A}]=y(async s=>{await u(),p({confirmLoading:!1}),r.value=s==null?void 0:s.type;let h=o.Save;const w=t({},s==null?void 0:s.record);v(r)===I.EDIT?h=o.Update:w.id=void 0,await c(t({},w)),U(h,W()).then(async d=>{d&&d.length>0&&await _(d)})});async function F(){try{const s=await E();p({confirmLoading:!0}),v(r)===I.EDIT?await z(s):await G(s),g.success(i(`common.tips.${r.value}Success`)),A(),k("success")}finally{p({confirmLoading:!1})}}return{t:i,registerDrawer:T,registerForm:S,type:r,handleSubmit:F}}});function K(a,k,i,r,g,S){const c=b("BasicForm"),u=b("BasicDrawer");return j(),M(u,C(a.$attrs,{onRegister:a.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:a.t(`common.title.${a.type}`),onOk:a.handleSubmit}),{default:O(()=>[q(c,{onRegister:a.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,V as p,H as r,N as s};
