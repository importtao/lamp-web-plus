var a=Object.assign;import{_ as R,a as y}from"./useDrawer.3628b9ed.js";import{_ as P}from"./BasicForm.ba267815.js";import{u as x}from"./useForm.93cfb83b.js";import{cu as m,be as l,j as w,d as B,w as L,D,F as $,r as v,o as j,n as M,J as O,p as q,s as C}from"./index.b6dfbfcf.js";import{S as n,A as I}from"./commonEnum.da040d67.js";import{g as U}from"./formValidateService.c9ec958e.js";const o={Page:{url:n.MATERIALS+"/skuItem/page",method:m.POST},Save:{url:n.MATERIALS+"/skuItem",method:m.POST},Update:{url:n.MATERIALS+"/skuItem",method:m.PUT},Delete:{url:n.MATERIALS+"/skuItem",method:m.DELETE},Query:{url:n.MATERIALS+"/skuItem/query",method:m.POST}},V=t=>l.request(a(a({},o.Page),{params:t})),G=t=>l.request(a(a({},o.Save),{params:t})),z=t=>l.request(a(a({},o.Update),{params:t})),H=t=>l.request(a(a({},o.Delete),{params:t})),{t:e}=w(),J=[{title:e("lamp.materials.skuItem.materialsId"),dataIndex:"materialsId"},{title:e("lamp.materials.skuItem.parentId"),dataIndex:"parentId"},{title:e("lamp.materials.skuItem.name"),dataIndex:"name"},{title:e("lamp.materials.skuItem.orderIndex"),dataIndex:"orderIndex"},{title:e("lamp.materials.skuItem.remark"),dataIndex:"remark"},{title:e("lamp.materials.skuItem.version"),dataIndex:"version"},{title:e("lamp.materials.skuItem.isDelete"),dataIndex:"isDelete"},{title:e("lamp.common.createTime"),dataIndex:"createTime",sorter:!0,width:180}],N=[{field:"createTimeRange",label:e("lamp.common.createTime"),component:"RangePicker",colProps:{span:6}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{label:e("lamp.materials.skuItem.materialsId"),field:"materialsId",component:"Input"},{label:e("lamp.materials.skuItem.parentId"),field:"parentId",component:"Input"},{label:e("lamp.materials.skuItem.name"),field:"name",component:"Input"},{label:e("lamp.materials.skuItem.orderIndex"),field:"orderIndex",component:"Input"},{label:e("lamp.materials.skuItem.remark"),field:"remark",component:"Input"},{label:e("lamp.materials.skuItem.version"),field:"version",component:"Input"},{label:e("lamp.materials.skuItem.isDelete"),field:"isDelete",component:"RadioButtonGroup",componentProps:{options:[{label:e("lamp.common.yes"),value:!0},{label:e("lamp.common.no"),value:!1}]}}],W=t=>[];var f=B({name:"SkuItemEdit",components:{BasicDrawer:R,BasicForm:P},emits:["success","register"],setup(t,{emit:k}){const{t:i}=w(),r=L(I.ADD),{createMessage:g}=$(),[b,{setFieldsValue:c,resetFields:u,updateSchema:_,validate:E}]=x({labelWidth:100,schemas:Q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[T,{setDrawerProps:p,closeDrawer:A}]=y(async s=>{await u(),p({confirmLoading:!1}),r.value=s==null?void 0:s.type;let S=o.Save;const h=a({},s==null?void 0:s.record);D(r)===I.EDIT?S=o.Update:h.id=void 0,await c(a({},h)),U(S,W()).then(async d=>{d&&d.length>0&&await _(d)})});async function F(){try{const s=await E();p({confirmLoading:!0}),D(r)===I.EDIT?await z(s):await G(s),g.success(i(`common.tips.${r.value}Success`)),A(),k("success")}finally{p({confirmLoading:!1})}}return{t:i,registerDrawer:T,registerForm:b,type:r,handleSubmit:F}}});function K(t,k,i,r,g,b){const c=v("BasicForm"),u=v("BasicDrawer");return j(),M(u,C(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",width:"30%",maskClosable:!1,title:t.t(`common.title.${t.type}`),onOk:t.handleSubmit}),{default:O(()=>[q(c,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}f.render=K;var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:f});export{X as E,f as _,J as c,V as p,H as r,N as s};
